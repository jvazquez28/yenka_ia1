2024-12-19 12:31:19,682 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 12:31:21,768 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 12:31:23,522 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 12:31:23,649 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 12:31:23,649 - __main__ - INFO - Database operations initialized successfully
2024-12-19 12:31:34,720 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 12:31:34,729 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 12:31:35,300 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 12:31:35,301 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 12:31:35,301 - __main__ - INFO - Database operations initialized successfully
2024-12-19 12:31:35,306 - src.agents.query_parser - INFO - Initializing QueryParser
2024-12-19 12:31:35,307 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 12:31:37,319 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/completions "HTTP/1.1 200 OK"
2024-12-19 12:31:37,337 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2024-12-19 12:31:37,337 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2024-12-19 12:31:37,338 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 12:31:37,338 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2023-01-01 to 2023-12-31
2024-12-19 12:31:37,435 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-19 12:31:38,393 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-19 12:31:45,062 - src.database.operations - ERROR - Error saving stock data: 'bar_date'
2024-12-19 12:31:45,063 - src.agents.data_fetcher - ERROR - Error fetching data: 'bar_date'
2024-12-19 12:31:45,063 - __main__ - ERROR - Error processing query: 'bar_date'
2024-12-19 14:07:38,301 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:07:58,933 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:10:36,937 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:10:38,202 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:10:39,585 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:10:39,810 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:10:39,810 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:10:56,550 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:10:56,557 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:10:56,714 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:10:56,717 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:10:57,010 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:10:57,010 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:10:57,011 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:10:57,364 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:10:57,366 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:10:57,367 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:10:57,375 - src.agents.query_parser - INFO - Initializing QueryParser
2024-12-19 14:10:57,376 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL
2024-12-19 14:10:58,084 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/completions "HTTP/1.1 404 Not Found"
2024-12-19 14:10:58,088 - src.agents.query_parser - ERROR - Error parsing query: Error code: 404 - {'error': {'message': 'The model `gpt-4.0-turbo-instruct` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-12-19 14:10:58,089 - __main__ - ERROR - Error processing query: Error code: 404 - {'error': {'message': 'The model `gpt-4.0-turbo-instruct` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-12-19 14:16:21,789 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:16:22,263 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:16:22,462 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:16:22,497 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:16:22,497 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:16:29,213 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:16:29,218 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:16:29,223 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:16:29,226 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:16:29,227 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:16:29,242 - src.agents.query_parser - INFO - Initializing QueryParser
2024-12-19 14:16:29,244 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 14:16:29,261 - src.agents.query_parser - ERROR - Error parsing query: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2024-12-19 14:16:29,266 - __main__ - ERROR - Error processing query: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2024-12-19 14:30:33,524 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:30:33,993 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:30:34,261 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:30:34,318 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:30:34,319 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:30:39,032 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:30:39,039 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:30:39,044 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:30:39,047 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:30:39,048 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:30:39,060 - src.agents.query_parser - INFO - Initializing QueryParser
2024-12-19 14:30:39,062 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 14:30:39,075 - src.agents.query_parser - ERROR - Error parsing query: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2024-12-19 14:30:39,079 - __main__ - ERROR - Error processing query: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2024-12-19 14:31:01,508 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:31:02,251 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:31:02,258 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:31:02,305 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:31:02,305 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:31:04,122 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:31:04,127 - __main__ - INFO - Initializing OpenAI LLM
2024-12-19 14:31:04,131 - __main__ - INFO - OpenAI LLM initialized successfully
2024-12-19 14:31:04,133 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:31:04,134 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:31:04,148 - __main__ - ERROR - Error processing query: QueryParser.__init__() takes 1 positional argument but 2 were given
2024-12-19 14:38:24,460 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:38:41,253 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:40:13,295 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:40:13,308 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 14:40:13,310 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 14:40:13,311 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 14:40:13,422 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:40:13,423 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:40:13,423 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 14:40:22,689 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:40:22,694 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 14:40:22,697 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 14:40:22,698 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 14:40:22,700 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:40:22,701 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:40:22,701 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 14:40:22,718 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 14:40:22,721 - src.agents.query_parser - ERROR - Error parsing query: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2024-12-19 14:40:22,726 - __main__ - ERROR - Error processing query: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2024-12-19 14:45:08,377 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:45:09,284 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 14:45:09,284 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 14:45:09,428 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 14:45:09,460 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:45:09,461 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:45:09,461 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 14:45:20,957 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 14:45:20,963 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 14:45:20,964 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 14:45:21,228 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 14:45:21,229 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 14:45:21,229 - __main__ - INFO - Database operations initialized successfully
2024-12-19 14:45:21,230 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 14:45:21,233 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 14:45:22,087 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 14:45:22,098 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 14:45:22,098 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 14:45:22,098 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: None to None
2024-12-19 14:45:22,188 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-19 14:45:23,257 - src.api.alpha_vantage - INFO - Fetched 6324 records from Alpha Vantage for ticker: AAPL
2024-12-19 14:45:23,259 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-19 14:45:23,318 - src.database.operations - INFO - Added new fundamental data for ticker: AAPL
2024-12-19 14:45:24,385 - src.database.operations - INFO - Saved 6324 OHLC records for ticker: AAPL
2024-12-19 14:45:24,389 - src.agents.data_fetcher - INFO - Fetched data saved to database
2024-12-19 18:00:49,500 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 18:00:55,133 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:00:55,133 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:00:55,386 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 18:00:55,728 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 18:00:55,728 - __main__ - INFO - Database operations initialized successfully
2024-12-19 18:00:55,728 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 18:01:02,702 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 18:01:02,713 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:01:02,716 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:01:02,984 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 18:01:02,984 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 18:01:02,984 - __main__ - INFO - Database operations initialized successfully
2024-12-19 18:01:02,999 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 18:01:03,002 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 18:01:03,771 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 18:01:03,788 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 18:01:03,789 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 18:01:03,789 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: None to None
2024-12-19 18:01:08,000 - src.database.operations - ERROR - Error retrieving stock data: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-19 18:01:08,000 - src.agents.data_fetcher - ERROR - Error fetching data: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-19 18:01:08,000 - __main__ - ERROR - Error processing query: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-19 18:18:56,487 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 18:18:58,263 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:18:58,263 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:18:58,576 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 18:18:58,684 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 18:18:58,684 - __main__ - INFO - Database operations initialized successfully
2024-12-19 18:18:58,684 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 18:19:08,410 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 18:19:08,415 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:19:08,415 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:19:08,643 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 18:19:08,643 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 18:19:08,643 - __main__ - INFO - Database operations initialized successfully
2024-12-19 18:19:08,643 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 18:19:08,658 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 18:19:09,443 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 18:19:09,461 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 18:19:09,462 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 18:19:09,463 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: None to None
2024-12-19 18:19:09,667 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-19 18:19:10,977 - src.api.alpha_vantage - INFO - Fetched 6324 records from Alpha Vantage for ticker: AAPL
2024-12-19 18:19:10,977 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-19 18:19:12,032 - src.database.operations - ERROR - Error saving stock data: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'close_price__0': '248.0500', 'high_price__0': '254.2800', 'low_price__0': '247.7400', 'open_price__0': '252.1600', 'bar_time__0': datetime.time(0, 0), 'timeframe__0': 'daily', 'bar_date__0': datetime.date(2024, 12, 18), 'volume__0': '56774101', 'ticker__0': 'AAPL', 'close_price__1': '253.4800', 'high_price__1': '253.8300', 'low_price__1': '249.7800', 'open_price__1': '250.0800', 'bar_time__1': datetime.time(0, 0), 'timeframe__1': 'daily', 'bar_date__1': datetime.date(2024, 12, 17), 'volume__1': '51356360', 'ticker__1': 'AAPL', 'close_price__2': '251.0400', 'high_price__2': '251.3800', 'low_price__2': '247.6500', 'open_price__2': '247.9900', 'bar_time__2': datetime.time(0, 0), 'timeframe__2': 'daily', 'bar_date__2': datetime.date(2024, 12, 16), 'volume__2': '51694753', 'ticker__2': 'AAPL', 'close_price__3': '248.1300', 'high_price__3': '249.2902', 'low_price__3': '246.2400', 'open_price__3': '247.8150', 'bar_time__3': datetime.time(0, 0), 'timeframe__3': 'daily', 'bar_date__3': datetime.date(2024, 12, 13), 'volume__3': '33155290', 'ticker__3': 'AAPL', 'close_price__4': '247.9600', 'high_price__4': '248.7400', 'low_price__4': '245.6800', 'open_price__4': '246.8900', 'bar_time__4': datetime.time(0, 0), 'timeframe__4': 'daily', 'bar_date__4': datetime.date(2024, 12, 12), 'volume__4': '32777532', 'ticker__4': 'AAPL', 'close_price__5': '246.4900', 'high_price__5': '250.8000', 'low_price__5': '246.2601', 'open_price__5': '247.9600', 'bar_time__5': datetime.time(0, 0) ... 8900 parameters truncated ... 'bar_time__994': datetime.time(0, 0), 'timeframe__994': 'daily', 'bar_date__994': datetime.date(2021, 1, 6), 'volume__994': '155087970', 'ticker__994': 'AAPL', 'close_price__995': '131.0100', 'high_price__995': '131.7400', 'low_price__995': '128.4300', 'open_price__995': '128.8900', 'bar_time__995': datetime.time(0, 0), 'timeframe__995': 'daily', 'bar_date__995': datetime.date(2021, 1, 5), 'volume__995': '97664898', 'ticker__995': 'AAPL', 'close_price__996': '129.4100', 'high_price__996': '133.6116', 'low_price__996': '126.7600', 'open_price__996': '133.5200', 'bar_time__996': datetime.time(0, 0), 'timeframe__996': 'daily', 'bar_date__996': datetime.date(2021, 1, 4), 'volume__996': '143301887', 'ticker__996': 'AAPL', 'close_price__997': '132.6900', 'high_price__997': '134.7400', 'low_price__997': '131.7200', 'open_price__997': '134.0800', 'bar_time__997': datetime.time(0, 0), 'timeframe__997': 'daily', 'bar_date__997': datetime.date(2020, 12, 31), 'volume__997': '99116586', 'ticker__997': 'AAPL', 'close_price__998': '133.7200', 'high_price__998': '135.9900', 'low_price__998': '133.4000', 'open_price__998': '135.5800', 'bar_time__998': datetime.time(0, 0), 'timeframe__998': 'daily', 'bar_date__998': datetime.date(2020, 12, 30), 'volume__998': '96452124', 'ticker__998': 'AAPL', 'close_price__999': '134.8700', 'high_price__999': '138.7890', 'low_price__999': '134.3409', 'open_price__999': '138.0500', 'bar_time__999': datetime.time(0, 0), 'timeframe__999': 'daily', 'bar_date__999': datetime.date(2020, 12, 29), 'volume__999': '121047324', 'ticker__999': 'AAPL'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 18:19:12,034 - src.agents.data_fetcher - ERROR - Error fetching data: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'close_price__0': '248.0500', 'high_price__0': '254.2800', 'low_price__0': '247.7400', 'open_price__0': '252.1600', 'bar_time__0': datetime.time(0, 0), 'timeframe__0': 'daily', 'bar_date__0': datetime.date(2024, 12, 18), 'volume__0': '56774101', 'ticker__0': 'AAPL', 'close_price__1': '253.4800', 'high_price__1': '253.8300', 'low_price__1': '249.7800', 'open_price__1': '250.0800', 'bar_time__1': datetime.time(0, 0), 'timeframe__1': 'daily', 'bar_date__1': datetime.date(2024, 12, 17), 'volume__1': '51356360', 'ticker__1': 'AAPL', 'close_price__2': '251.0400', 'high_price__2': '251.3800', 'low_price__2': '247.6500', 'open_price__2': '247.9900', 'bar_time__2': datetime.time(0, 0), 'timeframe__2': 'daily', 'bar_date__2': datetime.date(2024, 12, 16), 'volume__2': '51694753', 'ticker__2': 'AAPL', 'close_price__3': '248.1300', 'high_price__3': '249.2902', 'low_price__3': '246.2400', 'open_price__3': '247.8150', 'bar_time__3': datetime.time(0, 0), 'timeframe__3': 'daily', 'bar_date__3': datetime.date(2024, 12, 13), 'volume__3': '33155290', 'ticker__3': 'AAPL', 'close_price__4': '247.9600', 'high_price__4': '248.7400', 'low_price__4': '245.6800', 'open_price__4': '246.8900', 'bar_time__4': datetime.time(0, 0), 'timeframe__4': 'daily', 'bar_date__4': datetime.date(2024, 12, 12), 'volume__4': '32777532', 'ticker__4': 'AAPL', 'close_price__5': '246.4900', 'high_price__5': '250.8000', 'low_price__5': '246.2601', 'open_price__5': '247.9600', 'bar_time__5': datetime.time(0, 0) ... 8900 parameters truncated ... 'bar_time__994': datetime.time(0, 0), 'timeframe__994': 'daily', 'bar_date__994': datetime.date(2021, 1, 6), 'volume__994': '155087970', 'ticker__994': 'AAPL', 'close_price__995': '131.0100', 'high_price__995': '131.7400', 'low_price__995': '128.4300', 'open_price__995': '128.8900', 'bar_time__995': datetime.time(0, 0), 'timeframe__995': 'daily', 'bar_date__995': datetime.date(2021, 1, 5), 'volume__995': '97664898', 'ticker__995': 'AAPL', 'close_price__996': '129.4100', 'high_price__996': '133.6116', 'low_price__996': '126.7600', 'open_price__996': '133.5200', 'bar_time__996': datetime.time(0, 0), 'timeframe__996': 'daily', 'bar_date__996': datetime.date(2021, 1, 4), 'volume__996': '143301887', 'ticker__996': 'AAPL', 'close_price__997': '132.6900', 'high_price__997': '134.7400', 'low_price__997': '131.7200', 'open_price__997': '134.0800', 'bar_time__997': datetime.time(0, 0), 'timeframe__997': 'daily', 'bar_date__997': datetime.date(2020, 12, 31), 'volume__997': '99116586', 'ticker__997': 'AAPL', 'close_price__998': '133.7200', 'high_price__998': '135.9900', 'low_price__998': '133.4000', 'open_price__998': '135.5800', 'bar_time__998': datetime.time(0, 0), 'timeframe__998': 'daily', 'bar_date__998': datetime.date(2020, 12, 30), 'volume__998': '96452124', 'ticker__998': 'AAPL', 'close_price__999': '134.8700', 'high_price__999': '138.7890', 'low_price__999': '134.3409', 'open_price__999': '138.0500', 'bar_time__999': datetime.time(0, 0), 'timeframe__999': 'daily', 'bar_date__999': datetime.date(2020, 12, 29), 'volume__999': '121047324', 'ticker__999': 'AAPL'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 18:19:12,036 - __main__ - ERROR - Error processing query: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'close_price__0': '248.0500', 'high_price__0': '254.2800', 'low_price__0': '247.7400', 'open_price__0': '252.1600', 'bar_time__0': datetime.time(0, 0), 'timeframe__0': 'daily', 'bar_date__0': datetime.date(2024, 12, 18), 'volume__0': '56774101', 'ticker__0': 'AAPL', 'close_price__1': '253.4800', 'high_price__1': '253.8300', 'low_price__1': '249.7800', 'open_price__1': '250.0800', 'bar_time__1': datetime.time(0, 0), 'timeframe__1': 'daily', 'bar_date__1': datetime.date(2024, 12, 17), 'volume__1': '51356360', 'ticker__1': 'AAPL', 'close_price__2': '251.0400', 'high_price__2': '251.3800', 'low_price__2': '247.6500', 'open_price__2': '247.9900', 'bar_time__2': datetime.time(0, 0), 'timeframe__2': 'daily', 'bar_date__2': datetime.date(2024, 12, 16), 'volume__2': '51694753', 'ticker__2': 'AAPL', 'close_price__3': '248.1300', 'high_price__3': '249.2902', 'low_price__3': '246.2400', 'open_price__3': '247.8150', 'bar_time__3': datetime.time(0, 0), 'timeframe__3': 'daily', 'bar_date__3': datetime.date(2024, 12, 13), 'volume__3': '33155290', 'ticker__3': 'AAPL', 'close_price__4': '247.9600', 'high_price__4': '248.7400', 'low_price__4': '245.6800', 'open_price__4': '246.8900', 'bar_time__4': datetime.time(0, 0), 'timeframe__4': 'daily', 'bar_date__4': datetime.date(2024, 12, 12), 'volume__4': '32777532', 'ticker__4': 'AAPL', 'close_price__5': '246.4900', 'high_price__5': '250.8000', 'low_price__5': '246.2601', 'open_price__5': '247.9600', 'bar_time__5': datetime.time(0, 0) ... 8900 parameters truncated ... 'bar_time__994': datetime.time(0, 0), 'timeframe__994': 'daily', 'bar_date__994': datetime.date(2021, 1, 6), 'volume__994': '155087970', 'ticker__994': 'AAPL', 'close_price__995': '131.0100', 'high_price__995': '131.7400', 'low_price__995': '128.4300', 'open_price__995': '128.8900', 'bar_time__995': datetime.time(0, 0), 'timeframe__995': 'daily', 'bar_date__995': datetime.date(2021, 1, 5), 'volume__995': '97664898', 'ticker__995': 'AAPL', 'close_price__996': '129.4100', 'high_price__996': '133.6116', 'low_price__996': '126.7600', 'open_price__996': '133.5200', 'bar_time__996': datetime.time(0, 0), 'timeframe__996': 'daily', 'bar_date__996': datetime.date(2021, 1, 4), 'volume__996': '143301887', 'ticker__996': 'AAPL', 'close_price__997': '132.6900', 'high_price__997': '134.7400', 'low_price__997': '131.7200', 'open_price__997': '134.0800', 'bar_time__997': datetime.time(0, 0), 'timeframe__997': 'daily', 'bar_date__997': datetime.date(2020, 12, 31), 'volume__997': '99116586', 'ticker__997': 'AAPL', 'close_price__998': '133.7200', 'high_price__998': '135.9900', 'low_price__998': '133.4000', 'open_price__998': '135.5800', 'bar_time__998': datetime.time(0, 0), 'timeframe__998': 'daily', 'bar_date__998': datetime.date(2020, 12, 30), 'volume__998': '96452124', 'ticker__998': 'AAPL', 'close_price__999': '134.8700', 'high_price__999': '138.7890', 'low_price__999': '134.3409', 'open_price__999': '138.0500', 'bar_time__999': datetime.time(0, 0), 'timeframe__999': 'daily', 'bar_date__999': datetime.date(2020, 12, 29), 'volume__999': '121047324', 'ticker__999': 'AAPL'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 18:26:00,287 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 18:26:01,156 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:26:01,157 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:26:01,271 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 18:26:01,335 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 18:26:01,336 - __main__ - INFO - Database operations initialized successfully
2024-12-19 18:26:01,336 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 18:26:05,160 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 18:26:05,161 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:26:05,161 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:26:05,410 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 18:26:05,410 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 18:26:05,410 - __main__ - INFO - Database operations initialized successfully
2024-12-19 18:26:05,410 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 18:26:05,410 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 18:26:06,859 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 18:26:06,874 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 18:26:06,874 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 18:26:06,875 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: None to None
2024-12-19 18:26:06,966 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-19 18:26:08,248 - src.api.alpha_vantage - INFO - Fetched 6324 records from Alpha Vantage for ticker: AAPL
2024-12-19 18:26:08,250 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-19 18:26:08,999 - src.database.operations - ERROR - Error saving stock data: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'timeframe__0': 'daily', 'bar_date__0': datetime.date(2024, 12, 18), 'bar_time__0': datetime.time(0, 0), 'open_price__0': '252.1600', 'volume__0': '56774101', 'ticker__0': 'AAPL', 'low_price__0': '247.7400', 'high_price__0': '254.2800', 'close_price__0': '248.0500', 'timeframe__1': 'daily', 'bar_date__1': datetime.date(2024, 12, 17), 'bar_time__1': datetime.time(0, 0), 'open_price__1': '250.0800', 'volume__1': '51356360', 'ticker__1': 'AAPL', 'low_price__1': '249.7800', 'high_price__1': '253.8300', 'close_price__1': '253.4800', 'timeframe__2': 'daily', 'bar_date__2': datetime.date(2024, 12, 16), 'bar_time__2': datetime.time(0, 0), 'open_price__2': '247.9900', 'volume__2': '51694753', 'ticker__2': 'AAPL', 'low_price__2': '247.6500', 'high_price__2': '251.3800', 'close_price__2': '251.0400', 'timeframe__3': 'daily', 'bar_date__3': datetime.date(2024, 12, 13), 'bar_time__3': datetime.time(0, 0), 'open_price__3': '247.8150', 'volume__3': '33155290', 'ticker__3': 'AAPL', 'low_price__3': '246.2400', 'high_price__3': '249.2902', 'close_price__3': '248.1300', 'timeframe__4': 'daily', 'bar_date__4': datetime.date(2024, 12, 12), 'bar_time__4': datetime.time(0, 0), 'open_price__4': '246.8900', 'volume__4': '32777532', 'ticker__4': 'AAPL', 'low_price__4': '245.6800', 'high_price__4': '248.7400', 'close_price__4': '247.9600', 'timeframe__5': 'daily', 'bar_date__5': datetime.date(2024, 12, 11), 'bar_time__5': datetime.time(0, 0), 'open_price__5': '247.9600', 'volume__5': '45205814' ... 8900 parameters truncated ... 'volume__994': '155087970', 'ticker__994': 'AAPL', 'low_price__994': '126.3820', 'high_price__994': '131.0499', 'close_price__994': '126.6000', 'timeframe__995': 'daily', 'bar_date__995': datetime.date(2021, 1, 5), 'bar_time__995': datetime.time(0, 0), 'open_price__995': '128.8900', 'volume__995': '97664898', 'ticker__995': 'AAPL', 'low_price__995': '128.4300', 'high_price__995': '131.7400', 'close_price__995': '131.0100', 'timeframe__996': 'daily', 'bar_date__996': datetime.date(2021, 1, 4), 'bar_time__996': datetime.time(0, 0), 'open_price__996': '133.5200', 'volume__996': '143301887', 'ticker__996': 'AAPL', 'low_price__996': '126.7600', 'high_price__996': '133.6116', 'close_price__996': '129.4100', 'timeframe__997': 'daily', 'bar_date__997': datetime.date(2020, 12, 31), 'bar_time__997': datetime.time(0, 0), 'open_price__997': '134.0800', 'volume__997': '99116586', 'ticker__997': 'AAPL', 'low_price__997': '131.7200', 'high_price__997': '134.7400', 'close_price__997': '132.6900', 'timeframe__998': 'daily', 'bar_date__998': datetime.date(2020, 12, 30), 'bar_time__998': datetime.time(0, 0), 'open_price__998': '135.5800', 'volume__998': '96452124', 'ticker__998': 'AAPL', 'low_price__998': '133.4000', 'high_price__998': '135.9900', 'close_price__998': '133.7200', 'timeframe__999': 'daily', 'bar_date__999': datetime.date(2020, 12, 29), 'bar_time__999': datetime.time(0, 0), 'open_price__999': '138.0500', 'volume__999': '121047324', 'ticker__999': 'AAPL', 'low_price__999': '134.3409', 'high_price__999': '138.7890', 'close_price__999': '134.8700'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 18:26:09,001 - src.agents.data_fetcher - ERROR - Error fetching data: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'timeframe__0': 'daily', 'bar_date__0': datetime.date(2024, 12, 18), 'bar_time__0': datetime.time(0, 0), 'open_price__0': '252.1600', 'volume__0': '56774101', 'ticker__0': 'AAPL', 'low_price__0': '247.7400', 'high_price__0': '254.2800', 'close_price__0': '248.0500', 'timeframe__1': 'daily', 'bar_date__1': datetime.date(2024, 12, 17), 'bar_time__1': datetime.time(0, 0), 'open_price__1': '250.0800', 'volume__1': '51356360', 'ticker__1': 'AAPL', 'low_price__1': '249.7800', 'high_price__1': '253.8300', 'close_price__1': '253.4800', 'timeframe__2': 'daily', 'bar_date__2': datetime.date(2024, 12, 16), 'bar_time__2': datetime.time(0, 0), 'open_price__2': '247.9900', 'volume__2': '51694753', 'ticker__2': 'AAPL', 'low_price__2': '247.6500', 'high_price__2': '251.3800', 'close_price__2': '251.0400', 'timeframe__3': 'daily', 'bar_date__3': datetime.date(2024, 12, 13), 'bar_time__3': datetime.time(0, 0), 'open_price__3': '247.8150', 'volume__3': '33155290', 'ticker__3': 'AAPL', 'low_price__3': '246.2400', 'high_price__3': '249.2902', 'close_price__3': '248.1300', 'timeframe__4': 'daily', 'bar_date__4': datetime.date(2024, 12, 12), 'bar_time__4': datetime.time(0, 0), 'open_price__4': '246.8900', 'volume__4': '32777532', 'ticker__4': 'AAPL', 'low_price__4': '245.6800', 'high_price__4': '248.7400', 'close_price__4': '247.9600', 'timeframe__5': 'daily', 'bar_date__5': datetime.date(2024, 12, 11), 'bar_time__5': datetime.time(0, 0), 'open_price__5': '247.9600', 'volume__5': '45205814' ... 8900 parameters truncated ... 'volume__994': '155087970', 'ticker__994': 'AAPL', 'low_price__994': '126.3820', 'high_price__994': '131.0499', 'close_price__994': '126.6000', 'timeframe__995': 'daily', 'bar_date__995': datetime.date(2021, 1, 5), 'bar_time__995': datetime.time(0, 0), 'open_price__995': '128.8900', 'volume__995': '97664898', 'ticker__995': 'AAPL', 'low_price__995': '128.4300', 'high_price__995': '131.7400', 'close_price__995': '131.0100', 'timeframe__996': 'daily', 'bar_date__996': datetime.date(2021, 1, 4), 'bar_time__996': datetime.time(0, 0), 'open_price__996': '133.5200', 'volume__996': '143301887', 'ticker__996': 'AAPL', 'low_price__996': '126.7600', 'high_price__996': '133.6116', 'close_price__996': '129.4100', 'timeframe__997': 'daily', 'bar_date__997': datetime.date(2020, 12, 31), 'bar_time__997': datetime.time(0, 0), 'open_price__997': '134.0800', 'volume__997': '99116586', 'ticker__997': 'AAPL', 'low_price__997': '131.7200', 'high_price__997': '134.7400', 'close_price__997': '132.6900', 'timeframe__998': 'daily', 'bar_date__998': datetime.date(2020, 12, 30), 'bar_time__998': datetime.time(0, 0), 'open_price__998': '135.5800', 'volume__998': '96452124', 'ticker__998': 'AAPL', 'low_price__998': '133.4000', 'high_price__998': '135.9900', 'close_price__998': '133.7200', 'timeframe__999': 'daily', 'bar_date__999': datetime.date(2020, 12, 29), 'bar_time__999': datetime.time(0, 0), 'open_price__999': '138.0500', 'volume__999': '121047324', 'ticker__999': 'AAPL', 'low_price__999': '134.3409', 'high_price__999': '138.7890', 'close_price__999': '134.8700'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 18:26:09,002 - __main__ - ERROR - Error processing query: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'timeframe__0': 'daily', 'bar_date__0': datetime.date(2024, 12, 18), 'bar_time__0': datetime.time(0, 0), 'open_price__0': '252.1600', 'volume__0': '56774101', 'ticker__0': 'AAPL', 'low_price__0': '247.7400', 'high_price__0': '254.2800', 'close_price__0': '248.0500', 'timeframe__1': 'daily', 'bar_date__1': datetime.date(2024, 12, 17), 'bar_time__1': datetime.time(0, 0), 'open_price__1': '250.0800', 'volume__1': '51356360', 'ticker__1': 'AAPL', 'low_price__1': '249.7800', 'high_price__1': '253.8300', 'close_price__1': '253.4800', 'timeframe__2': 'daily', 'bar_date__2': datetime.date(2024, 12, 16), 'bar_time__2': datetime.time(0, 0), 'open_price__2': '247.9900', 'volume__2': '51694753', 'ticker__2': 'AAPL', 'low_price__2': '247.6500', 'high_price__2': '251.3800', 'close_price__2': '251.0400', 'timeframe__3': 'daily', 'bar_date__3': datetime.date(2024, 12, 13), 'bar_time__3': datetime.time(0, 0), 'open_price__3': '247.8150', 'volume__3': '33155290', 'ticker__3': 'AAPL', 'low_price__3': '246.2400', 'high_price__3': '249.2902', 'close_price__3': '248.1300', 'timeframe__4': 'daily', 'bar_date__4': datetime.date(2024, 12, 12), 'bar_time__4': datetime.time(0, 0), 'open_price__4': '246.8900', 'volume__4': '32777532', 'ticker__4': 'AAPL', 'low_price__4': '245.6800', 'high_price__4': '248.7400', 'close_price__4': '247.9600', 'timeframe__5': 'daily', 'bar_date__5': datetime.date(2024, 12, 11), 'bar_time__5': datetime.time(0, 0), 'open_price__5': '247.9600', 'volume__5': '45205814' ... 8900 parameters truncated ... 'volume__994': '155087970', 'ticker__994': 'AAPL', 'low_price__994': '126.3820', 'high_price__994': '131.0499', 'close_price__994': '126.6000', 'timeframe__995': 'daily', 'bar_date__995': datetime.date(2021, 1, 5), 'bar_time__995': datetime.time(0, 0), 'open_price__995': '128.8900', 'volume__995': '97664898', 'ticker__995': 'AAPL', 'low_price__995': '128.4300', 'high_price__995': '131.7400', 'close_price__995': '131.0100', 'timeframe__996': 'daily', 'bar_date__996': datetime.date(2021, 1, 4), 'bar_time__996': datetime.time(0, 0), 'open_price__996': '133.5200', 'volume__996': '143301887', 'ticker__996': 'AAPL', 'low_price__996': '126.7600', 'high_price__996': '133.6116', 'close_price__996': '129.4100', 'timeframe__997': 'daily', 'bar_date__997': datetime.date(2020, 12, 31), 'bar_time__997': datetime.time(0, 0), 'open_price__997': '134.0800', 'volume__997': '99116586', 'ticker__997': 'AAPL', 'low_price__997': '131.7200', 'high_price__997': '134.7400', 'close_price__997': '132.6900', 'timeframe__998': 'daily', 'bar_date__998': datetime.date(2020, 12, 30), 'bar_time__998': datetime.time(0, 0), 'open_price__998': '135.5800', 'volume__998': '96452124', 'ticker__998': 'AAPL', 'low_price__998': '133.4000', 'high_price__998': '135.9900', 'close_price__998': '133.7200', 'timeframe__999': 'daily', 'bar_date__999': datetime.date(2020, 12, 29), 'bar_time__999': datetime.time(0, 0), 'open_price__999': '138.0500', 'volume__999': '121047324', 'ticker__999': 'AAPL', 'low_price__999': '134.3409', 'high_price__999': '138.7890', 'close_price__999': '134.8700'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 18:31:43,109 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 18:31:43,960 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:31:43,974 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:31:44,092 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 18:31:44,131 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 18:31:44,131 - __main__ - INFO - Database operations initialized successfully
2024-12-19 18:31:44,131 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 18:31:48,611 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 18:31:48,616 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:31:48,617 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 18:31:48,924 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 18:31:48,924 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 18:31:48,924 - __main__ - INFO - Database operations initialized successfully
2024-12-19 18:31:48,924 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 18:31:48,933 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último mes
2024-12-19 18:31:50,443 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 18:31:50,443 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 18:31:50,443 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': None, 'end_date': None, 'timeframe': 'daily'}
2024-12-19 18:31:50,443 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: None to None
2024-12-19 18:31:50,550 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-19 18:31:55,269 - src.api.alpha_vantage - INFO - Fetched 6324 records from Alpha Vantage for ticker: AAPL
2024-12-19 18:31:55,271 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-19 18:31:56,184 - src.database.operations - ERROR - Error saving stock data: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'low_price__0': '247.7400', 'volume__0': '56774101', 'ticker__0': 'AAPL', 'open_price__0': '252.1600', 'close_price__0': '248.0500', 'timeframe__0': 'daily', 'bar_time__0': datetime.time(0, 0), 'high_price__0': '254.2800', 'bar_date__0': datetime.date(2024, 12, 18), 'low_price__1': '249.7800', 'volume__1': '51356360', 'ticker__1': 'AAPL', 'open_price__1': '250.0800', 'close_price__1': '253.4800', 'timeframe__1': 'daily', 'bar_time__1': datetime.time(0, 0), 'high_price__1': '253.8300', 'bar_date__1': datetime.date(2024, 12, 17), 'low_price__2': '247.6500', 'volume__2': '51694753', 'ticker__2': 'AAPL', 'open_price__2': '247.9900', 'close_price__2': '251.0400', 'timeframe__2': 'daily', 'bar_time__2': datetime.time(0, 0), 'high_price__2': '251.3800', 'bar_date__2': datetime.date(2024, 12, 16), 'low_price__3': '246.2400', 'volume__3': '33155290', 'ticker__3': 'AAPL', 'open_price__3': '247.8150', 'close_price__3': '248.1300', 'timeframe__3': 'daily', 'bar_time__3': datetime.time(0, 0), 'high_price__3': '249.2902', 'bar_date__3': datetime.date(2024, 12, 13), 'low_price__4': '245.6800', 'volume__4': '32777532', 'ticker__4': 'AAPL', 'open_price__4': '246.8900', 'close_price__4': '247.9600', 'timeframe__4': 'daily', 'bar_time__4': datetime.time(0, 0), 'high_price__4': '248.7400', 'bar_date__4': datetime.date(2024, 12, 12), 'low_price__5': '246.2601', 'volume__5': '45205814', 'ticker__5': 'AAPL', 'open_price__5': '247.9600', 'close_price__5': '246.4900' ... 8900 parameters truncated ... 'close_price__994': '126.6000', 'timeframe__994': 'daily', 'bar_time__994': datetime.time(0, 0), 'high_price__994': '131.0499', 'bar_date__994': datetime.date(2021, 1, 6), 'low_price__995': '128.4300', 'volume__995': '97664898', 'ticker__995': 'AAPL', 'open_price__995': '128.8900', 'close_price__995': '131.0100', 'timeframe__995': 'daily', 'bar_time__995': datetime.time(0, 0), 'high_price__995': '131.7400', 'bar_date__995': datetime.date(2021, 1, 5), 'low_price__996': '126.7600', 'volume__996': '143301887', 'ticker__996': 'AAPL', 'open_price__996': '133.5200', 'close_price__996': '129.4100', 'timeframe__996': 'daily', 'bar_time__996': datetime.time(0, 0), 'high_price__996': '133.6116', 'bar_date__996': datetime.date(2021, 1, 4), 'low_price__997': '131.7200', 'volume__997': '99116586', 'ticker__997': 'AAPL', 'open_price__997': '134.0800', 'close_price__997': '132.6900', 'timeframe__997': 'daily', 'bar_time__997': datetime.time(0, 0), 'high_price__997': '134.7400', 'bar_date__997': datetime.date(2020, 12, 31), 'low_price__998': '133.4000', 'volume__998': '96452124', 'ticker__998': 'AAPL', 'open_price__998': '135.5800', 'close_price__998': '133.7200', 'timeframe__998': 'daily', 'bar_time__998': datetime.time(0, 0), 'high_price__998': '135.9900', 'bar_date__998': datetime.date(2020, 12, 30), 'low_price__999': '134.3409', 'volume__999': '121047324', 'ticker__999': 'AAPL', 'open_price__999': '138.0500', 'close_price__999': '134.8700', 'timeframe__999': 'daily', 'bar_time__999': datetime.time(0, 0), 'high_price__999': '138.7890', 'bar_date__999': datetime.date(2020, 12, 29)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 18:31:56,186 - src.agents.data_fetcher - ERROR - Error fetching data: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'low_price__0': '247.7400', 'volume__0': '56774101', 'ticker__0': 'AAPL', 'open_price__0': '252.1600', 'close_price__0': '248.0500', 'timeframe__0': 'daily', 'bar_time__0': datetime.time(0, 0), 'high_price__0': '254.2800', 'bar_date__0': datetime.date(2024, 12, 18), 'low_price__1': '249.7800', 'volume__1': '51356360', 'ticker__1': 'AAPL', 'open_price__1': '250.0800', 'close_price__1': '253.4800', 'timeframe__1': 'daily', 'bar_time__1': datetime.time(0, 0), 'high_price__1': '253.8300', 'bar_date__1': datetime.date(2024, 12, 17), 'low_price__2': '247.6500', 'volume__2': '51694753', 'ticker__2': 'AAPL', 'open_price__2': '247.9900', 'close_price__2': '251.0400', 'timeframe__2': 'daily', 'bar_time__2': datetime.time(0, 0), 'high_price__2': '251.3800', 'bar_date__2': datetime.date(2024, 12, 16), 'low_price__3': '246.2400', 'volume__3': '33155290', 'ticker__3': 'AAPL', 'open_price__3': '247.8150', 'close_price__3': '248.1300', 'timeframe__3': 'daily', 'bar_time__3': datetime.time(0, 0), 'high_price__3': '249.2902', 'bar_date__3': datetime.date(2024, 12, 13), 'low_price__4': '245.6800', 'volume__4': '32777532', 'ticker__4': 'AAPL', 'open_price__4': '246.8900', 'close_price__4': '247.9600', 'timeframe__4': 'daily', 'bar_time__4': datetime.time(0, 0), 'high_price__4': '248.7400', 'bar_date__4': datetime.date(2024, 12, 12), 'low_price__5': '246.2601', 'volume__5': '45205814', 'ticker__5': 'AAPL', 'open_price__5': '247.9600', 'close_price__5': '246.4900' ... 8900 parameters truncated ... 'close_price__994': '126.6000', 'timeframe__994': 'daily', 'bar_time__994': datetime.time(0, 0), 'high_price__994': '131.0499', 'bar_date__994': datetime.date(2021, 1, 6), 'low_price__995': '128.4300', 'volume__995': '97664898', 'ticker__995': 'AAPL', 'open_price__995': '128.8900', 'close_price__995': '131.0100', 'timeframe__995': 'daily', 'bar_time__995': datetime.time(0, 0), 'high_price__995': '131.7400', 'bar_date__995': datetime.date(2021, 1, 5), 'low_price__996': '126.7600', 'volume__996': '143301887', 'ticker__996': 'AAPL', 'open_price__996': '133.5200', 'close_price__996': '129.4100', 'timeframe__996': 'daily', 'bar_time__996': datetime.time(0, 0), 'high_price__996': '133.6116', 'bar_date__996': datetime.date(2021, 1, 4), 'low_price__997': '131.7200', 'volume__997': '99116586', 'ticker__997': 'AAPL', 'open_price__997': '134.0800', 'close_price__997': '132.6900', 'timeframe__997': 'daily', 'bar_time__997': datetime.time(0, 0), 'high_price__997': '134.7400', 'bar_date__997': datetime.date(2020, 12, 31), 'low_price__998': '133.4000', 'volume__998': '96452124', 'ticker__998': 'AAPL', 'open_price__998': '135.5800', 'close_price__998': '133.7200', 'timeframe__998': 'daily', 'bar_time__998': datetime.time(0, 0), 'high_price__998': '135.9900', 'bar_date__998': datetime.date(2020, 12, 30), 'low_price__999': '134.3409', 'volume__999': '121047324', 'ticker__999': 'AAPL', 'open_price__999': '138.0500', 'close_price__999': '134.8700', 'timeframe__999': 'daily', 'bar_time__999': datetime.time(0, 0), 'high_price__999': '138.7890', 'bar_date__999': datetime.date(2020, 12, 29)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 18:31:56,187 - __main__ - ERROR - Error processing query: (psycopg2.errors.UniqueViolation) llave duplicada viola restricción de unicidad «ohlc_data_ticker_bar_date_bar_time_timeframe_key»
DETAIL:  Ya existe la llave (ticker, bar_date, bar_time, timeframe)=(AAPL, 2024-12-18, 00:00:00, daily).

[SQL: INSERT INTO ohlc_data (ticker, bar_date, bar_time, timeframe, open_price, high_price, low_price, close_price, volume) VALUES (%(ticker__0)s, %(bar_date__0)s, %(bar_time__0)s, %(timeframe__0)s, %(open_price__0)s, %(high_price__0)s, %(low_price__0)s, % ... 176783 characters truncated ... %(open_price__999)s, %(high_price__999)s, %(low_price__999)s, %(close_price__999)s, %(volume__999)s)]
[parameters: {'low_price__0': '247.7400', 'volume__0': '56774101', 'ticker__0': 'AAPL', 'open_price__0': '252.1600', 'close_price__0': '248.0500', 'timeframe__0': 'daily', 'bar_time__0': datetime.time(0, 0), 'high_price__0': '254.2800', 'bar_date__0': datetime.date(2024, 12, 18), 'low_price__1': '249.7800', 'volume__1': '51356360', 'ticker__1': 'AAPL', 'open_price__1': '250.0800', 'close_price__1': '253.4800', 'timeframe__1': 'daily', 'bar_time__1': datetime.time(0, 0), 'high_price__1': '253.8300', 'bar_date__1': datetime.date(2024, 12, 17), 'low_price__2': '247.6500', 'volume__2': '51694753', 'ticker__2': 'AAPL', 'open_price__2': '247.9900', 'close_price__2': '251.0400', 'timeframe__2': 'daily', 'bar_time__2': datetime.time(0, 0), 'high_price__2': '251.3800', 'bar_date__2': datetime.date(2024, 12, 16), 'low_price__3': '246.2400', 'volume__3': '33155290', 'ticker__3': 'AAPL', 'open_price__3': '247.8150', 'close_price__3': '248.1300', 'timeframe__3': 'daily', 'bar_time__3': datetime.time(0, 0), 'high_price__3': '249.2902', 'bar_date__3': datetime.date(2024, 12, 13), 'low_price__4': '245.6800', 'volume__4': '32777532', 'ticker__4': 'AAPL', 'open_price__4': '246.8900', 'close_price__4': '247.9600', 'timeframe__4': 'daily', 'bar_time__4': datetime.time(0, 0), 'high_price__4': '248.7400', 'bar_date__4': datetime.date(2024, 12, 12), 'low_price__5': '246.2601', 'volume__5': '45205814', 'ticker__5': 'AAPL', 'open_price__5': '247.9600', 'close_price__5': '246.4900' ... 8900 parameters truncated ... 'close_price__994': '126.6000', 'timeframe__994': 'daily', 'bar_time__994': datetime.time(0, 0), 'high_price__994': '131.0499', 'bar_date__994': datetime.date(2021, 1, 6), 'low_price__995': '128.4300', 'volume__995': '97664898', 'ticker__995': 'AAPL', 'open_price__995': '128.8900', 'close_price__995': '131.0100', 'timeframe__995': 'daily', 'bar_time__995': datetime.time(0, 0), 'high_price__995': '131.7400', 'bar_date__995': datetime.date(2021, 1, 5), 'low_price__996': '126.7600', 'volume__996': '143301887', 'ticker__996': 'AAPL', 'open_price__996': '133.5200', 'close_price__996': '129.4100', 'timeframe__996': 'daily', 'bar_time__996': datetime.time(0, 0), 'high_price__996': '133.6116', 'bar_date__996': datetime.date(2021, 1, 4), 'low_price__997': '131.7200', 'volume__997': '99116586', 'ticker__997': 'AAPL', 'open_price__997': '134.0800', 'close_price__997': '132.6900', 'timeframe__997': 'daily', 'bar_time__997': datetime.time(0, 0), 'high_price__997': '134.7400', 'bar_date__997': datetime.date(2020, 12, 31), 'low_price__998': '133.4000', 'volume__998': '96452124', 'ticker__998': 'AAPL', 'open_price__998': '135.5800', 'close_price__998': '133.7200', 'timeframe__998': 'daily', 'bar_time__998': datetime.time(0, 0), 'high_price__998': '135.9900', 'bar_date__998': datetime.date(2020, 12, 30), 'low_price__999': '134.3409', 'volume__999': '121047324', 'ticker__999': 'AAPL', 'open_price__999': '138.0500', 'close_price__999': '134.8700', 'timeframe__999': 'daily', 'bar_time__999': datetime.time(0, 0), 'high_price__999': '138.7890', 'bar_date__999': datetime.date(2020, 12, 29)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-12-19 19:21:22,661 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:21:24,526 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:21:24,526 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:21:24,660 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:21:24,745 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:21:24,746 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:21:24,746 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:21:50,545 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:21:50,545 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:21:50,545 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:21:50,704 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:21:50,706 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:21:50,707 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:21:50,834 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:21:50,834 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:21:50,834 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:21:50,834 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:21:50,975 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:21:50,975 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:21:50,975 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:21:50,975 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:21:50,988 - src.agents.query_parser - INFO - Parsing query: Analiza datos diarios de AAPL del ultimo año
2024-12-19 19:21:53,030 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 19:21:53,039 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2021-03-27', 'end_date': '2022-03-27', 'timeframe': 'daily'}
2024-12-19 19:21:53,041 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2021-03-27', 'end_date': '2022-03-27', 'timeframe': 'daily'}
2024-12-19 19:21:53,042 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2021-03-27 to 2022-03-27
2024-12-19 19:21:53,147 - src.agents.data_fetcher - INFO - Data retrieved from database
2024-12-19 19:23:25,386 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:23:25,395 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:23:25,397 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:23:25,557 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:23:25,564 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:23:25,564 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:23:25,747 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:23:25,747 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:23:25,747 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:23:25,747 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:23:25,859 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:23:25,859 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:23:25,859 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:23:25,859 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:23:25,859 - src.agents.query_parser - INFO - Parsing query: Analiza datos diarios de AAPL del 1 de enero al 31 de diciembre de 2023
2024-12-19 19:23:29,157 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 19:23:29,162 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2024-12-19 19:23:29,162 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2024-12-19 19:23:29,162 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2023-01-01 to 2023-12-31
2024-12-19 19:23:29,232 - src.agents.data_fetcher - INFO - Data retrieved from database
2024-12-19 19:28:43,325 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:28:43,333 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:28:43,334 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:28:43,474 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:28:43,480 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:28:43,481 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:28:43,663 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:28:43,663 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:28:43,663 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:28:43,663 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:28:43,794 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:28:43,794 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:28:43,794 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:28:43,794 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:28:43,805 - src.agents.query_parser - INFO - Parsing query: Analiza datos semanales de MSFT desde enero de 2000 a la fecha
2024-12-19 19:28:45,643 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 19:28:45,672 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'MSFT', 'start_date': '2000-01-01', 'end_date': None, 'timeframe': 'weekly'}
2024-12-19 19:28:45,673 - __main__ - INFO - Parsed query: {'ticker': 'MSFT', 'start_date': '2000-01-01', 'end_date': None, 'timeframe': 'weekly'}
2024-12-19 19:28:45,674 - src.agents.data_fetcher - INFO - Fetching data for ticker: MSFT, timeframe: weekly, dates: 2000-01-01 to None
2024-12-19 19:28:45,763 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-19 19:28:46,800 - src.api.alpha_vantage - INFO - Fetched 1311 records from Alpha Vantage for ticker: MSFT
2024-12-19 19:28:46,801 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-19 19:28:46,801 - src.agents.data_fetcher - ERROR - Error fetching data: 'DatabaseOperations' object has no attribute 'save_stock_data'
2024-12-19 19:28:46,801 - __main__ - ERROR - Error processing query: 'DatabaseOperations' object has no attribute 'save_stock_data'
2024-12-19 19:30:50,920 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:30:50,920 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:30:50,927 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:30:51,073 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:30:51,074 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:30:51,074 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:30:51,075 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:30:51,076 - src.agents.query_parser - INFO - Parsing query: Analiza datos semanales de MSFT desde enero de 2000 a la fecha
2024-12-19 19:30:52,776 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 19:30:52,776 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'MSFT', 'start_date': '2000-01-01', 'end_date': None, 'timeframe': 'weekly'}
2024-12-19 19:30:52,782 - __main__ - INFO - Parsed query: {'ticker': 'MSFT', 'start_date': '2000-01-01', 'end_date': None, 'timeframe': 'weekly'}
2024-12-19 19:30:52,782 - src.agents.data_fetcher - INFO - Fetching data for ticker: MSFT, timeframe: weekly, dates: 2000-01-01 to None
2024-12-19 19:30:52,834 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-19 19:30:53,854 - src.api.alpha_vantage - INFO - Fetched 1311 records from Alpha Vantage for ticker: MSFT
2024-12-19 19:30:53,856 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-19 19:30:53,856 - src.agents.data_fetcher - ERROR - Error fetching data: 'DatabaseOperations' object has no attribute 'save_stock_data'
2024-12-19 19:30:53,856 - __main__ - ERROR - Error processing query: 'DatabaseOperations' object has no attribute 'save_stock_data'
2024-12-19 19:38:34,293 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:38:35,176 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:38:35,190 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:38:35,294 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:38:35,342 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:38:35,342 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:38:35,343 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:39:13,019 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:39:13,029 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:39:13,030 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:39:13,226 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:39:13,229 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:39:13,229 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:39:13,343 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:39:13,343 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:39:13,343 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:39:13,343 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:39:13,460 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:39:13,460 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:39:13,460 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:39:13,460 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:39:13,460 - src.agents.query_parser - INFO - Parsing query: analiza datos semanales de MSFT del 1 de enero de 2000 al 31 de diciembre de 2023
2024-12-19 19:39:15,485 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 19:39:15,497 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'MSFT', 'start_date': '2000-01-01', 'end_date': '2023-12-31', 'timeframe': 'weekly'}
2024-12-19 19:39:15,497 - __main__ - INFO - Parsed query: {'ticker': 'MSFT', 'start_date': '2000-01-01', 'end_date': '2023-12-31', 'timeframe': 'weekly'}
2024-12-19 19:39:15,498 - src.agents.data_fetcher - INFO - Fetching data for ticker: MSFT, timeframe: weekly, dates: 2000-01-01 to 2023-12-31
2024-12-19 19:39:15,569 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-19 19:39:16,551 - src.api.alpha_vantage - INFO - Fetched 1311 records from Alpha Vantage for ticker: MSFT
2024-12-19 19:39:16,553 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-19 19:39:16,610 - src.database.operations - INFO - Added new fundamental data for ticker: MSFT
2024-12-19 19:39:16,871 - src.database.operations - INFO - Saved 1311 new OHLC records for ticker: MSFT
2024-12-19 19:39:16,874 - src.agents.data_fetcher - INFO - Fetched data saved to database
2024-12-19 19:55:32,042 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:55:32,989 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:55:32,990 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:55:33,114 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:55:33,150 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:55:33,150 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:55:33,150 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:55:58,547 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:55:58,559 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:55:58,560 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:55:58,706 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:55:58,707 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:55:58,707 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:55:58,708 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:56:09,381 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-19 19:56:09,389 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:56:09,389 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-19 19:56:09,529 - __main__ - INFO - QueryParser initialized successfully
2024-12-19 19:56:09,529 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-19 19:56:09,529 - __main__ - INFO - Database operations initialized successfully
2024-12-19 19:56:09,530 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-19 19:56:09,532 - src.agents.query_parser - INFO - Parsing query: Analiza datos semanales de MSFT desde el 1 de enero de 2000 hasta hoy
2024-12-19 19:56:10,173 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-19 19:56:10,183 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'MSFT', 'start_date': '2000-01-01', 'end_date': '2023-10-24', 'timeframe': 'weekly'}
2024-12-19 19:56:10,183 - __main__ - INFO - Parsed query: {'ticker': 'MSFT', 'start_date': '2000-01-01', 'end_date': '2023-10-24', 'timeframe': 'weekly'}
2024-12-19 19:56:10,183 - src.agents.data_fetcher - INFO - Fetching data for ticker: MSFT, timeframe: weekly, dates: 2000-01-01 to 2023-10-24
2024-12-19 19:56:10,249 - src.agents.data_fetcher - INFO - Data retrieved from database
2024-12-20 13:43:12,196 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-20 13:43:18,694 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:43:18,695 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:43:18,970 - __main__ - INFO - QueryParser initialized successfully
2024-12-20 13:43:19,261 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-20 13:43:19,261 - __main__ - INFO - Database operations initialized successfully
2024-12-20 13:43:19,263 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-20 13:44:11,551 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-20 13:44:11,557 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:44:11,559 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:44:11,806 - __main__ - INFO - QueryParser initialized successfully
2024-12-20 13:44:11,807 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-20 13:44:11,808 - __main__ - INFO - Database operations initialized successfully
2024-12-20 13:44:11,808 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-20 13:44:11,811 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del último año
2024-12-20 13:44:12,526 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-20 13:44:12,535 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2021-08-26', 'end_date': '2022-08-26', 'timeframe': 'daily'}
2024-12-20 13:44:12,535 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2021-08-26', 'end_date': '2022-08-26', 'timeframe': 'daily'}
2024-12-20 13:44:12,535 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2021-08-26 to 2022-08-26
2024-12-20 13:44:12,763 - src.agents.data_fetcher - INFO - Data retrieved from database
2024-12-20 13:46:39,614 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-20 13:46:39,623 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:46:39,626 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:46:39,781 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-20 13:46:39,789 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:46:39,789 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:46:40,028 - __main__ - INFO - QueryParser initialized successfully
2024-12-20 13:46:40,029 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-20 13:46:40,030 - __main__ - INFO - Database operations initialized successfully
2024-12-20 13:46:40,030 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-20 13:46:40,106 - __main__ - INFO - QueryParser initialized successfully
2024-12-20 13:46:40,111 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-20 13:46:40,111 - __main__ - INFO - Database operations initialized successfully
2024-12-20 13:46:40,113 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-20 13:46:40,120 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2023
2024-12-20 13:46:40,816 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-20 13:46:40,823 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2024-12-20 13:46:40,823 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2024-12-20 13:46:40,825 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2023-01-01 to 2023-12-31
2024-12-20 13:46:40,940 - src.agents.data_fetcher - INFO - Data retrieved from database
2024-12-20 13:49:40,225 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-20 13:49:41,172 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:49:41,173 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:49:41,322 - __main__ - INFO - QueryParser initialized successfully
2024-12-20 13:49:41,367 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-20 13:49:41,367 - __main__ - INFO - Database operations initialized successfully
2024-12-20 13:49:41,367 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-20 13:50:11,951 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-20 13:50:11,959 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:50:11,961 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:50:12,053 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2024-12-20 13:50:12,060 - __main__ - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:50:12,063 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2024-12-20 13:50:12,299 - __main__ - INFO - QueryParser initialized successfully
2024-12-20 13:50:12,300 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-20 13:50:12,300 - __main__ - INFO - Database operations initialized successfully
2024-12-20 13:50:12,301 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-20 13:50:12,375 - __main__ - INFO - QueryParser initialized successfully
2024-12-20 13:50:12,375 - src.database.operations - INFO - PostgreSQL database connection initialized
2024-12-20 13:50:12,375 - __main__ - INFO - Database operations initialized successfully
2024-12-20 13:50:12,377 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2024-12-20 13:50:12,380 - src.agents.query_parser - INFO - Parsing query: Muestra datos semanales de Tesla Motors para los años de 2020 a 2023
2024-12-20 13:50:13,103 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-20 13:50:13,119 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'TSLA', 'start_date': '2020-01-01', 'end_date': '2023-12-31', 'timeframe': 'weekly'}
2024-12-20 13:50:13,120 - __main__ - INFO - Parsed query: {'ticker': 'TSLA', 'start_date': '2020-01-01', 'end_date': '2023-12-31', 'timeframe': 'weekly'}
2024-12-20 13:50:13,121 - src.agents.data_fetcher - INFO - Fetching data for ticker: TSLA, timeframe: weekly, dates: 2020-01-01 to 2023-12-31
2024-12-20 13:50:13,231 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2024-12-20 13:50:14,145 - src.api.alpha_vantage - INFO - Fetched 755 records from Alpha Vantage for ticker: TSLA
2024-12-20 13:50:14,147 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2024-12-20 13:50:14,201 - src.database.operations - INFO - Added new fundamental data for ticker: TSLA
2024-12-20 13:50:14,398 - src.database.operations - INFO - Saved 755 new OHLC records for ticker: TSLA
2024-12-20 13:50:14,401 - src.agents.data_fetcher - INFO - Fetched data saved to database
2025-01-06 09:18:18,454 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 09:18:25,202 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:18:25,203 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:18:25,593 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 09:18:25,904 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 09:18:25,904 - __main__ - INFO - Database operations initialized successfully
2025-01-06 09:18:25,904 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 09:21:11,829 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 09:21:11,838 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:21:11,839 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:21:11,961 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 09:21:11,973 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:21:11,975 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:21:12,342 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 09:21:12,353 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 09:21:12,353 - __main__ - INFO - Database operations initialized successfully
2025-01-06 09:21:12,353 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 09:21:12,454 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 09:21:12,454 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 09:21:12,454 - __main__ - INFO - Database operations initialized successfully
2025-01-06 09:21:12,454 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 09:21:12,472 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de Apple, Inc. incluyendo todo el año 2024
2025-01-06 09:21:13,942 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 09:21:13,955 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2024-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 09:21:13,955 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2024-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 09:21:13,955 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2024-01-01 to 2024-12-31
2025-01-06 09:21:14,171 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 09:48:46,304 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 09:48:47,174 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:48:47,174 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:48:47,323 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 09:48:47,356 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 09:48:47,356 - __main__ - INFO - Database operations initialized successfully
2025-01-06 09:48:47,357 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 09:49:00,110 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 09:49:00,118 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:49:00,122 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:49:00,277 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 09:49:00,277 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:49:00,277 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 09:49:00,566 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 09:49:00,566 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 09:49:00,566 - __main__ - INFO - Database operations initialized successfully
2025-01-06 09:49:00,566 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 09:49:00,708 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 09:49:00,709 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 09:49:00,709 - __main__ - INFO - Database operations initialized successfully
2025-01-06 09:49:00,709 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 09:49:00,709 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de todo 2024
2025-01-06 09:49:01,623 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 09:49:01,639 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2024-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 09:49:01,639 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2024-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 09:49:01,640 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2024-01-01 to 2024-12-31
2025-01-06 09:49:01,759 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2025-01-06 09:49:03,483 - src.api.alpha_vantage - INFO - Fetched 6334 records from Alpha Vantage for ticker: AAPL
2025-01-06 09:49:03,484 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2025-01-06 09:49:04,119 - src.database.operations - INFO - Saved 10 new OHLC records for ticker: AAPL
2025-01-06 09:49:04,119 - src.database.operations - INFO - Skipped 6324 existing records for ticker: AAPL
2025-01-06 09:49:04,119 - src.agents.data_fetcher - INFO - Fetched data saved to database
2025-01-06 10:05:28,475 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:05:29,342 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:05:29,342 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:05:29,500 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:05:29,535 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:05:29,535 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:05:29,536 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:06:00,134 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:06:00,141 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:06:00,145 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:06:00,233 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:06:00,252 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:06:00,254 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:06:00,598 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:06:00,607 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:06:00,609 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:06:00,609 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:06:00,715 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:06:00,715 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:06:00,715 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:06:00,715 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:06:00,732 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de Apple Inc del año pasado con respecto al día de hoy
2025-01-06 10:06:01,589 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:06:01,602 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2021-07-29', 'end_date': '2022-07-29', 'timeframe': 'daily'}
2025-01-06 10:06:01,603 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2021-07-29', 'end_date': '2022-07-29', 'timeframe': 'daily'}
2025-01-06 10:06:01,603 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2021-07-29 to 2022-07-29
2025-01-06 10:06:01,718 - src.database.operations - ERROR - Error retrieving stock data: '>=' not supported between instances of 'datetime.date' and 'str'
2025-01-06 10:06:01,719 - src.agents.data_fetcher - ERROR - Error fetching data: '>=' not supported between instances of 'datetime.date' and 'str'
2025-01-06 10:06:01,719 - __main__ - ERROR - Error processing query: '>=' not supported between instances of 'datetime.date' and 'str'
2025-01-06 10:06:16,912 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:06:16,919 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:06:16,921 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:06:17,050 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:06:17,071 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:06:17,073 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:06:17,404 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:06:17,404 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:06:17,404 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:06:17,404 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:06:17,565 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:06:17,565 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:06:17,565 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:06:17,565 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:06:17,565 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de Apple Inc de 2024
2025-01-06 10:06:18,300 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:06:18,300 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2024-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 10:06:18,300 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2024-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 10:06:18,300 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2024-01-01 to 2024-12-31
2025-01-06 10:06:18,399 - src.database.operations - ERROR - Error retrieving stock data: '>=' not supported between instances of 'datetime.date' and 'str'
2025-01-06 10:06:18,399 - src.agents.data_fetcher - ERROR - Error fetching data: '>=' not supported between instances of 'datetime.date' and 'str'
2025-01-06 10:06:18,399 - __main__ - ERROR - Error processing query: '>=' not supported between instances of 'datetime.date' and 'str'
2025-01-06 10:15:57,405 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:15:58,298 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:15:58,298 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:15:58,470 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:15:58,507 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:15:58,507 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:15:58,508 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:16:06,562 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:16:06,577 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:16:06,578 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:16:06,763 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:16:06,763 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:16:06,763 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:16:07,055 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:16:07,055 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:16:07,055 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:16:07,055 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:16:07,174 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:16:07,174 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:16:07,174 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:16:07,174 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:16:07,190 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2023
2025-01-06 10:16:07,993 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:16:08,015 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 10:16:08,016 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 10:16:08,017 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2023-01-01 to 2023-12-31
2025-01-06 10:16:08,131 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2025-01-06 10:16:09,110 - src.api.alpha_vantage - INFO - Fetched 6334 records from Alpha Vantage for ticker: AAPL
2025-01-06 10:16:09,112 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2025-01-06 10:16:09,743 - src.database.operations - INFO - No new records to save for ticker: AAPL
2025-01-06 10:16:09,744 - src.database.operations - INFO - Skipped 6334 existing records for ticker: AAPL
2025-01-06 10:16:09,747 - src.agents.data_fetcher - INFO - Fetched data saved to database
2025-01-06 10:33:28,805 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:33:29,674 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:33:29,674 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:33:29,827 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:33:29,862 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:33:29,862 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:33:29,862 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:33:37,832 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:33:37,840 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:33:37,841 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:33:37,974 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:33:37,986 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:33:37,988 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:33:38,346 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:33:38,346 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:33:38,346 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:33:38,346 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:33:38,458 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:33:38,474 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:33:38,475 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:33:38,475 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:33:38,483 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2024
2025-01-06 10:33:39,291 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:33:39,312 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2024-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 10:33:39,312 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2024-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 10:33:39,312 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2024-01-01 to 2024-12-31
2025-01-06 10:33:39,424 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 10:49:39,483 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:49:40,363 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:49:40,377 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:49:40,527 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:49:40,563 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:49:40,563 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:49:40,563 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:50:01,939 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:50:01,951 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:50:01,953 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:50:02,096 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:50:02,105 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:50:02,105 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:50:02,413 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:50:02,413 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:50:02,413 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:50:02,413 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:50:02,513 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:50:02,513 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:50:02,513 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:50:02,513 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:50:02,529 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de SodaStream de todo 2022
2025-01-06 10:50:03,314 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:50:03,331 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'SODA', 'start_date': '2022-01-01', 'end_date': '2022-12-31', 'timeframe': 'daily'}
2025-01-06 10:50:03,331 - __main__ - INFO - Parsed query: {'ticker': 'SODA', 'start_date': '2022-01-01', 'end_date': '2022-12-31', 'timeframe': 'daily'}
2025-01-06 10:50:03,331 - src.agents.data_fetcher - INFO - Fetching data for ticker: SODA, timeframe: daily, dates: 2022-01-01 to 2022-12-31
2025-01-06 10:50:03,439 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2025-01-06 10:50:05,374 - src.api.alpha_vantage - INFO - Fetched 2036 records from Alpha Vantage for ticker: SODA
2025-01-06 10:50:05,375 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2025-01-06 10:50:05,413 - src.database.operations - INFO - Added new fundamental data for ticker: SODA
2025-01-06 10:50:05,950 - src.database.operations - INFO - Saved 2036 new OHLC records for ticker: SODA
2025-01-06 10:50:05,954 - src.agents.data_fetcher - INFO - Fetched data saved to database
2025-01-06 10:50:22,796 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:50:22,806 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:50:22,807 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:50:23,424 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:50:23,424 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:50:23,424 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:50:23,424 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:54:55,233 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:54:55,240 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:54:55,243 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:54:55,436 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:54:55,436 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:54:55,436 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:54:55,751 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:54:55,751 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:54:55,751 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:54:55,751 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:54:55,884 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:54:55,884 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:54:55,887 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:54:55,887 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:54:55,887 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de Microsoft de todo 2022
2025-01-06 10:54:56,622 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:54:56,622 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'MSFT', 'start_date': '2022-01-01', 'end_date': '2022-12-31', 'timeframe': 'daily'}
2025-01-06 10:54:56,622 - __main__ - INFO - Parsed query: {'ticker': 'MSFT', 'start_date': '2022-01-01', 'end_date': '2022-12-31', 'timeframe': 'daily'}
2025-01-06 10:54:56,622 - src.agents.data_fetcher - INFO - Fetching data for ticker: MSFT, timeframe: daily, dates: 2022-01-01 to 2022-12-31
2025-01-06 10:54:56,733 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2025-01-06 10:54:57,736 - src.api.alpha_vantage - INFO - Fetched 6334 records from Alpha Vantage for ticker: MSFT
2025-01-06 10:54:57,736 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2025-01-06 10:54:59,601 - src.database.operations - INFO - Saved 6334 new OHLC records for ticker: MSFT
2025-01-06 10:54:59,602 - src.agents.data_fetcher - INFO - Fetched data saved to database
2025-01-06 10:54:59,617 - src.agents.data_fetcher - INFO - Data extracted from database after API fetch
2025-01-06 10:55:34,046 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:55:34,052 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:55:34,053 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:55:34,211 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:55:34,211 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:55:34,211 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:55:34,211 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:55:34,277 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:55:34,279 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:55:34,280 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:55:34,418 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:55:34,420 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:55:34,421 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:55:34,421 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:55:34,421 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de Microsoft de todo 2023
2025-01-06 10:55:35,142 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:55:35,151 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'MSFT', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': None}
2025-01-06 10:55:35,151 - __main__ - INFO - Parsed query: {'ticker': 'MSFT', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': None}
2025-01-06 10:55:35,152 - src.agents.data_fetcher - INFO - Fetching data for ticker: MSFT, timeframe: None, dates: 2023-01-01 to 2023-12-31
2025-01-06 10:55:35,237 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2025-01-06 10:55:35,237 - src.agents.data_fetcher - ERROR - Error fetching data: 'NoneType' object has no attribute 'lower'
2025-01-06 10:55:35,237 - __main__ - ERROR - Error processing query: 'NoneType' object has no attribute 'lower'
2025-01-06 10:57:16,536 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:57:17,468 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:57:17,468 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:57:17,622 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:57:17,653 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:57:17,654 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:57:17,654 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:57:35,474 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:57:35,490 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:57:35,492 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:57:35,620 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:57:35,626 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:57:35,628 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:57:35,944 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:57:35,944 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:57:35,944 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:57:35,944 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:57:36,037 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:57:36,037 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:57:36,037 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:57:36,037 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:57:36,053 - src.agents.query_parser - INFO - Parsing query: Analiza Microsoft de todo 2023
2025-01-06 10:57:37,002 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:57:37,018 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'MSFT', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 10:57:37,018 - __main__ - INFO - Parsed query: {'ticker': 'MSFT', 'start_date': '2023-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 10:57:37,019 - src.agents.data_fetcher - INFO - Fetching data for ticker: MSFT, timeframe: daily, dates: 2023-01-01 to 2023-12-31
2025-01-06 10:57:37,123 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 10:58:50,590 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:58:50,602 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:58:50,602 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:58:50,758 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 10:58:50,760 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:58:50,760 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 10:58:50,774 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:58:50,775 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:58:50,776 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:58:50,776 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:58:50,903 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 10:58:50,903 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 10:58:50,903 - __main__ - INFO - Database operations initialized successfully
2025-01-06 10:58:50,903 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 10:58:50,903 - src.agents.query_parser - INFO - Parsing query: Analiza Microsoft de todo 2022
2025-01-06 10:58:51,624 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 10:58:51,624 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'MSFT', 'start_date': '2022-01-01', 'end_date': '2022-12-31', 'timeframe': 'daily'}
2025-01-06 10:58:51,624 - __main__ - INFO - Parsed query: {'ticker': 'MSFT', 'start_date': '2022-01-01', 'end_date': '2022-12-31', 'timeframe': 'daily'}
2025-01-06 10:58:51,624 - src.agents.data_fetcher - INFO - Fetching data for ticker: MSFT, timeframe: daily, dates: 2022-01-01 to 2022-12-31
2025-01-06 10:58:51,737 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 11:29:11,343 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 11:29:12,193 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 11:29:12,193 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 11:29:12,357 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 11:29:12,385 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 11:29:12,387 - __main__ - INFO - Database operations initialized successfully
2025-01-06 11:29:12,387 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 11:29:50,179 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 11:29:50,199 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 11:29:50,201 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 11:29:50,344 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 11:29:50,360 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 11:29:50,361 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 11:29:50,698 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 11:29:50,698 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 11:29:50,698 - __main__ - INFO - Database operations initialized successfully
2025-01-06 11:29:50,698 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 11:29:50,811 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 11:29:50,811 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 11:29:50,811 - __main__ - INFO - Database operations initialized successfully
2025-01-06 11:29:50,811 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 11:29:50,828 - src.agents.query_parser - INFO - Parsing query: Analiza Apple Inc con información diaria que incluya desde 2022 hasta 2024
2025-01-06 11:29:51,616 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 11:29:51,633 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 11:29:51,636 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 11:29:51,636 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2024-12-31
2025-01-06 11:29:51,750 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 11:29:55,582 - __main__ - ERROR - Error processing query: Indicator "rolling(C,20)" errored with exception: '_Array' object has no attribute '_get_axis_number'
2025-01-06 13:40:33,048 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 13:40:38,498 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:40:38,498 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:40:38,819 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 13:40:39,061 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 13:40:39,062 - __main__ - INFO - Database operations initialized successfully
2025-01-06 13:40:39,063 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 13:40:58,085 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 13:40:58,100 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:40:58,102 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:40:58,268 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 13:40:58,275 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:40:58,276 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:40:58,541 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 13:40:58,541 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 13:40:58,541 - __main__ - INFO - Database operations initialized successfully
2025-01-06 13:40:58,541 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 13:40:58,698 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 13:40:58,698 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 13:40:58,698 - __main__ - INFO - Database operations initialized successfully
2025-01-06 13:40:58,698 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 13:40:58,698 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2023 y 2024
2025-01-06 13:40:59,526 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 13:40:59,543 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 13:40:59,544 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 13:40:59,544 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2023-01-01 to 2024-12-31
2025-01-06 13:40:59,679 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 13:41:02,953 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 13:41:05,030 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 13:41:05,032 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 502
2025-01-06 13:41:05,039 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 13:41:05,040 - src.backtesting.two_sma - ERROR - Failed during rolling calculations: Indicator "rolling(C,20)" errored with exception: '_Array' object has no attribute '_get_axis_number'
2025-01-06 13:41:05,041 - src.backtesting.two_sma - ERROR - Error during two_SMA_backtest: Indicator "rolling(C,20)" errored with exception: '_Array' object has no attribute '_get_axis_number'
2025-01-06 13:41:05,042 - __main__ - ERROR - Error processing backtest: Indicator "rolling(C,20)" errored with exception: '_Array' object has no attribute '_get_axis_number'
2025-01-06 13:53:28,099 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 13:53:28,999 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:53:28,999 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:53:29,169 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 13:53:29,198 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 13:53:29,198 - __main__ - INFO - Database operations initialized successfully
2025-01-06 13:53:29,198 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 13:53:39,444 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 13:53:39,451 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:53:39,451 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:53:39,680 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 13:53:39,682 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:53:39,682 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 13:53:39,837 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 13:53:39,837 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 13:53:39,837 - __main__ - INFO - Database operations initialized successfully
2025-01-06 13:53:39,837 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 13:53:40,098 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 13:53:40,098 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 13:53:40,098 - __main__ - INFO - Database operations initialized successfully
2025-01-06 13:53:40,098 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 13:53:40,105 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2023 y 2024
2025-01-06 13:53:40,895 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 13:53:40,906 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 13:53:40,907 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2023-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 13:53:40,908 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2023-01-01 to 2024-12-31
2025-01-06 13:53:41,006 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 13:53:41,417 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 13:53:42,271 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 13:53:42,282 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 502
2025-01-06 13:53:42,287 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 13:53:42,301 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 13:53:42,419 - src.backtesting.two_sma - ERROR - Error during two_SMA_backtest: '_stats'
2025-01-06 13:53:42,419 - __main__ - ERROR - Error processing backtest: '_stats'
2025-01-06 14:24:57,449 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 14:24:58,447 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:24:58,447 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:24:58,608 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 14:24:58,631 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 14:24:58,631 - __main__ - INFO - Database operations initialized successfully
2025-01-06 14:24:58,631 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 14:25:08,152 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 14:25:08,167 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:25:08,169 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:25:08,286 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 14:25:08,286 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:25:08,286 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:25:08,511 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 14:25:08,511 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 14:25:08,511 - __main__ - INFO - Database operations initialized successfully
2025-01-06 14:25:08,527 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 14:25:08,646 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 14:25:08,646 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 14:25:08,646 - __main__ - INFO - Database operations initialized successfully
2025-01-06 14:25:08,646 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 14:25:08,646 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 14:25:09,462 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 14:25:09,467 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 14:25:09,467 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 14:25:09,467 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 14:25:09,580 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 14:25:10,919 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 14:25:10,919 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 14:25:10,920 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 14:25:10,920 - src.backtesting.two_sma - ERROR - Error during two_SMA_backtest: commission should be between -10% (e.g. market-maker's rebates) and 10% (fees), is 0.1
2025-01-06 14:25:10,920 - __main__ - ERROR - Error processing backtest: commission should be between -10% (e.g. market-maker's rebates) and 10% (fees), is 0.1
2025-01-06 14:26:29,814 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 14:26:30,781 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:26:30,781 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:26:30,951 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 14:26:30,985 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 14:26:30,985 - __main__ - INFO - Database operations initialized successfully
2025-01-06 14:26:30,985 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 14:26:39,968 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 14:26:39,983 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:26:39,985 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:26:40,277 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 14:26:40,278 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 14:26:40,278 - __main__ - INFO - Database operations initialized successfully
2025-01-06 14:26:40,278 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 14:26:43,883 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 14:26:43,896 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:26:43,897 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 14:26:44,188 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 14:26:44,188 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 14:26:44,188 - __main__ - INFO - Database operations initialized successfully
2025-01-06 14:26:44,188 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 14:26:44,194 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 14:26:45,032 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 14:26:45,043 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 14:26:45,045 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 14:26:45,045 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 14:26:45,150 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 14:26:46,285 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 14:26:46,286 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 14:26:46,287 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 14:26:46,287 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 14:26:46,292 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 14:26:46,331 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 14:26:46,332 - src.backtesting.two_sma - ERROR - Error during two_SMA_backtest: '_Stats' object has no attribute 'exposure_time'
2025-01-06 14:26:46,332 - __main__ - ERROR - Error processing backtest: '_Stats' object has no attribute 'exposure_time'
2025-01-06 18:23:55,105 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:23:56,571 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:23:56,572 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:23:56,716 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:23:56,780 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:23:56,781 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:23:56,781 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:24:08,318 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:24:08,326 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:24:08,328 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:24:08,604 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:24:08,604 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:24:08,604 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:24:08,738 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:24:08,754 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:24:08,754 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:24:08,754 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:24:08,906 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:24:08,906 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:24:08,906 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:24:08,906 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:24:08,906 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 18:24:09,728 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 18:24:09,751 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 18:24:09,752 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 18:24:09,753 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 18:24:09,875 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 18:24:12,579 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 18:24:12,580 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 18:24:12,583 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 18:24:12,587 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 18:24:12,590 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 18:24:12,673 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 18:24:12,777 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 18:24:12,791 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=1
2025-01-06 18:24:12,808 - src.database.operations - INFO - Saved 3 backtest detail records for test_id 1
2025-01-06 18:24:12,811 - src.backtesting.two_sma - INFO - Backtest details saved for 3 trades
2025-01-06 18:24:12,814 - __main__ - ERROR - Error processing backtest: '_stats'
2025-01-06 18:37:48,509 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:37:49,441 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:37:49,442 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:37:49,607 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:37:49,642 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:37:49,642 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:37:49,643 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:38:00,456 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:38:00,468 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:38:00,470 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:38:00,596 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:38:00,599 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:38:00,599 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:38:00,919 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:38:00,919 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:38:00,928 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:38:00,928 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:38:01,009 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:38:01,012 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:38:01,013 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:38:01,014 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:38:01,021 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 18:38:01,905 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 18:38:01,910 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 18:38:01,910 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 18:38:01,910 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 18:38:02,032 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 18:38:03,355 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 18:38:03,356 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 18:38:03,360 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 18:38:03,363 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 18:38:03,367 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 18:38:03,433 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 18:38:03,458 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 18:38:03,464 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=2
2025-01-06 18:38:03,477 - src.database.operations - ERROR - Error saving backtest details: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (5, 2, 2, 2022-02-08, 00:00:00, 2022-03-02, 00:00:00, 152.427420, 172.170000, -56, 22 days, 12.95, -1105.58, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %( ... 3415 characters truncated ...  %(sell_date__20)s, %(sell_time__20)s, %(buy_price__20)s, %(sell_price__20)s, %(position_size__20)s)]
[parameters: {'buy_date__0': datetime.date(2022, 1, 29), 'sell_time__0': datetime.time(0, 0), 'buy_price__0': 176.22605, 'test_id__0': 2, 'position_size__0': 56, 'trade_number__0': 1, 'buy_time__0': datetime.time(0, 0), 'sell_price__0': 152.58, 'sell_date__0': datetime.date(2022, 2, 8), 'buy_date__1': datetime.date(2022, 2, 8), 'sell_time__1': datetime.time(0, 0), 'buy_price__1': 152.42742, 'test_id__1': 2, 'position_size__1': -56, 'trade_number__1': 2, 'buy_time__1': datetime.time(0, 0), 'sell_price__1': 172.17, 'sell_date__1': datetime.date(2022, 3, 2), 'buy_date__2': datetime.date(2022, 3, 2), 'sell_time__2': datetime.time(0, 0), 'buy_price__2': 172.34216999999998, 'test_id__2': 2, 'position_size__2': 43, 'trade_number__2': 3, 'buy_time__2': datetime.time(0, 0), 'sell_price__2': 163.92, 'sell_date__2': datetime.date(2022, 3, 16), 'buy_date__3': datetime.date(2022, 3, 16), 'sell_time__3': datetime.time(0, 0), 'buy_price__3': 163.75608, 'test_id__3': 2, 'position_size__3': -44, 'trade_number__3': 4, 'buy_time__3': datetime.time(0, 0), 'sell_price__3': 144.345, 'sell_date__3': datetime.date(2022, 4, 20), 'buy_date__4': datetime.date(2022, 4, 20), 'sell_time__4': datetime.time(0, 0), 'buy_price__4': 144.489345, 'test_id__4': 2, 'position_size__4': 55, 'trade_number__4': 5, 'buy_time__4': datetime.time(0, 0), 'sell_price__4': 132.08, 'sell_date__4': datetime.date(2022, 4, 27), 'buy_date__5': datetime.date(2022, 4, 27), 'sell_time__5': datetime.time(0, 0), 'buy_price__5': 131.94792, 'test_id__5': 2, 'position_size__5': -55 ... 89 parameters truncated ... 'position_size__15': -51, 'trade_number__15': 16, 'buy_time__15': datetime.time(0, 0), 'sell_price__15': 189.485, 'sell_date__15': datetime.date(2023, 2, 25), 'buy_date__16': datetime.date(2023, 2, 25), 'sell_time__16': datetime.time(0, 0), 'buy_price__16': 189.674485, 'test_id__16': 2, 'position_size__16': 45, 'trade_number__16': 17, 'buy_time__16': datetime.time(0, 0), 'sell_price__16': 176.48, 'sell_date__16': datetime.date(2023, 3, 7), 'buy_date__17': datetime.date(2023, 3, 7), 'sell_time__17': datetime.time(0, 0), 'buy_price__17': 176.30352, 'test_id__17': 2, 'position_size__17': -45, 'trade_number__17': 18, 'buy_time__17': datetime.time(0, 0), 'sell_price__17': 180.07, 'sell_date__17': datetime.date(2023, 3, 25), 'buy_date__18': datetime.date(2023, 3, 25), 'sell_time__18': datetime.time(0, 0), 'buy_price__18': 180.25006999999997, 'test_id__18': 2, 'position_size__18': 43, 'trade_number__18': 19, 'buy_time__18': datetime.time(0, 0), 'sell_price__18': 166.91, 'sell_date__18': datetime.date(2023, 4, 5), 'buy_date__19': datetime.date(2023, 4, 5), 'sell_time__19': datetime.time(0, 0), 'buy_price__19': 166.74309, 'test_id__19': 2, 'position_size__19': -44, 'trade_number__19': 20, 'buy_time__19': datetime.time(0, 0), 'sell_price__19': 183.97, 'sell_date__19': datetime.date(2023, 4, 15), 'buy_date__20': datetime.date(2023, 4, 15), 'sell_time__20': datetime.time(0, 0), 'buy_price__20': 184.15397, 'test_id__20': 2, 'position_size__20': 35, 'trade_number__20': 21, 'buy_time__20': datetime.time(0, 0), 'sell_price__20': 193.9, 'sell_date__20': datetime.date(2023, 5, 18)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-06 18:38:03,477 - src.backtesting.two_sma - ERROR - Error during two_SMA_backtest: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (5, 2, 2, 2022-02-08, 00:00:00, 2022-03-02, 00:00:00, 152.427420, 172.170000, -56, 22 days, 12.95, -1105.58, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %( ... 3415 characters truncated ...  %(sell_date__20)s, %(sell_time__20)s, %(buy_price__20)s, %(sell_price__20)s, %(position_size__20)s)]
[parameters: {'buy_date__0': datetime.date(2022, 1, 29), 'sell_time__0': datetime.time(0, 0), 'buy_price__0': 176.22605, 'test_id__0': 2, 'position_size__0': 56, 'trade_number__0': 1, 'buy_time__0': datetime.time(0, 0), 'sell_price__0': 152.58, 'sell_date__0': datetime.date(2022, 2, 8), 'buy_date__1': datetime.date(2022, 2, 8), 'sell_time__1': datetime.time(0, 0), 'buy_price__1': 152.42742, 'test_id__1': 2, 'position_size__1': -56, 'trade_number__1': 2, 'buy_time__1': datetime.time(0, 0), 'sell_price__1': 172.17, 'sell_date__1': datetime.date(2022, 3, 2), 'buy_date__2': datetime.date(2022, 3, 2), 'sell_time__2': datetime.time(0, 0), 'buy_price__2': 172.34216999999998, 'test_id__2': 2, 'position_size__2': 43, 'trade_number__2': 3, 'buy_time__2': datetime.time(0, 0), 'sell_price__2': 163.92, 'sell_date__2': datetime.date(2022, 3, 16), 'buy_date__3': datetime.date(2022, 3, 16), 'sell_time__3': datetime.time(0, 0), 'buy_price__3': 163.75608, 'test_id__3': 2, 'position_size__3': -44, 'trade_number__3': 4, 'buy_time__3': datetime.time(0, 0), 'sell_price__3': 144.345, 'sell_date__3': datetime.date(2022, 4, 20), 'buy_date__4': datetime.date(2022, 4, 20), 'sell_time__4': datetime.time(0, 0), 'buy_price__4': 144.489345, 'test_id__4': 2, 'position_size__4': 55, 'trade_number__4': 5, 'buy_time__4': datetime.time(0, 0), 'sell_price__4': 132.08, 'sell_date__4': datetime.date(2022, 4, 27), 'buy_date__5': datetime.date(2022, 4, 27), 'sell_time__5': datetime.time(0, 0), 'buy_price__5': 131.94792, 'test_id__5': 2, 'position_size__5': -55 ... 89 parameters truncated ... 'position_size__15': -51, 'trade_number__15': 16, 'buy_time__15': datetime.time(0, 0), 'sell_price__15': 189.485, 'sell_date__15': datetime.date(2023, 2, 25), 'buy_date__16': datetime.date(2023, 2, 25), 'sell_time__16': datetime.time(0, 0), 'buy_price__16': 189.674485, 'test_id__16': 2, 'position_size__16': 45, 'trade_number__16': 17, 'buy_time__16': datetime.time(0, 0), 'sell_price__16': 176.48, 'sell_date__16': datetime.date(2023, 3, 7), 'buy_date__17': datetime.date(2023, 3, 7), 'sell_time__17': datetime.time(0, 0), 'buy_price__17': 176.30352, 'test_id__17': 2, 'position_size__17': -45, 'trade_number__17': 18, 'buy_time__17': datetime.time(0, 0), 'sell_price__17': 180.07, 'sell_date__17': datetime.date(2023, 3, 25), 'buy_date__18': datetime.date(2023, 3, 25), 'sell_time__18': datetime.time(0, 0), 'buy_price__18': 180.25006999999997, 'test_id__18': 2, 'position_size__18': 43, 'trade_number__18': 19, 'buy_time__18': datetime.time(0, 0), 'sell_price__18': 166.91, 'sell_date__18': datetime.date(2023, 4, 5), 'buy_date__19': datetime.date(2023, 4, 5), 'sell_time__19': datetime.time(0, 0), 'buy_price__19': 166.74309, 'test_id__19': 2, 'position_size__19': -44, 'trade_number__19': 20, 'buy_time__19': datetime.time(0, 0), 'sell_price__19': 183.97, 'sell_date__19': datetime.date(2023, 4, 15), 'buy_date__20': datetime.date(2023, 4, 15), 'sell_time__20': datetime.time(0, 0), 'buy_price__20': 184.15397, 'test_id__20': 2, 'position_size__20': 35, 'trade_number__20': 21, 'buy_time__20': datetime.time(0, 0), 'sell_price__20': 193.9, 'sell_date__20': datetime.date(2023, 5, 18)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-06 18:38:03,481 - __main__ - ERROR - Error processing backtest: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (5, 2, 2, 2022-02-08, 00:00:00, 2022-03-02, 00:00:00, 152.427420, 172.170000, -56, 22 days, 12.95, -1105.58, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %( ... 3415 characters truncated ...  %(sell_date__20)s, %(sell_time__20)s, %(buy_price__20)s, %(sell_price__20)s, %(position_size__20)s)]
[parameters: {'buy_date__0': datetime.date(2022, 1, 29), 'sell_time__0': datetime.time(0, 0), 'buy_price__0': 176.22605, 'test_id__0': 2, 'position_size__0': 56, 'trade_number__0': 1, 'buy_time__0': datetime.time(0, 0), 'sell_price__0': 152.58, 'sell_date__0': datetime.date(2022, 2, 8), 'buy_date__1': datetime.date(2022, 2, 8), 'sell_time__1': datetime.time(0, 0), 'buy_price__1': 152.42742, 'test_id__1': 2, 'position_size__1': -56, 'trade_number__1': 2, 'buy_time__1': datetime.time(0, 0), 'sell_price__1': 172.17, 'sell_date__1': datetime.date(2022, 3, 2), 'buy_date__2': datetime.date(2022, 3, 2), 'sell_time__2': datetime.time(0, 0), 'buy_price__2': 172.34216999999998, 'test_id__2': 2, 'position_size__2': 43, 'trade_number__2': 3, 'buy_time__2': datetime.time(0, 0), 'sell_price__2': 163.92, 'sell_date__2': datetime.date(2022, 3, 16), 'buy_date__3': datetime.date(2022, 3, 16), 'sell_time__3': datetime.time(0, 0), 'buy_price__3': 163.75608, 'test_id__3': 2, 'position_size__3': -44, 'trade_number__3': 4, 'buy_time__3': datetime.time(0, 0), 'sell_price__3': 144.345, 'sell_date__3': datetime.date(2022, 4, 20), 'buy_date__4': datetime.date(2022, 4, 20), 'sell_time__4': datetime.time(0, 0), 'buy_price__4': 144.489345, 'test_id__4': 2, 'position_size__4': 55, 'trade_number__4': 5, 'buy_time__4': datetime.time(0, 0), 'sell_price__4': 132.08, 'sell_date__4': datetime.date(2022, 4, 27), 'buy_date__5': datetime.date(2022, 4, 27), 'sell_time__5': datetime.time(0, 0), 'buy_price__5': 131.94792, 'test_id__5': 2, 'position_size__5': -55 ... 89 parameters truncated ... 'position_size__15': -51, 'trade_number__15': 16, 'buy_time__15': datetime.time(0, 0), 'sell_price__15': 189.485, 'sell_date__15': datetime.date(2023, 2, 25), 'buy_date__16': datetime.date(2023, 2, 25), 'sell_time__16': datetime.time(0, 0), 'buy_price__16': 189.674485, 'test_id__16': 2, 'position_size__16': 45, 'trade_number__16': 17, 'buy_time__16': datetime.time(0, 0), 'sell_price__16': 176.48, 'sell_date__16': datetime.date(2023, 3, 7), 'buy_date__17': datetime.date(2023, 3, 7), 'sell_time__17': datetime.time(0, 0), 'buy_price__17': 176.30352, 'test_id__17': 2, 'position_size__17': -45, 'trade_number__17': 18, 'buy_time__17': datetime.time(0, 0), 'sell_price__17': 180.07, 'sell_date__17': datetime.date(2023, 3, 25), 'buy_date__18': datetime.date(2023, 3, 25), 'sell_time__18': datetime.time(0, 0), 'buy_price__18': 180.25006999999997, 'test_id__18': 2, 'position_size__18': 43, 'trade_number__18': 19, 'buy_time__18': datetime.time(0, 0), 'sell_price__18': 166.91, 'sell_date__18': datetime.date(2023, 4, 5), 'buy_date__19': datetime.date(2023, 4, 5), 'sell_time__19': datetime.time(0, 0), 'buy_price__19': 166.74309, 'test_id__19': 2, 'position_size__19': -44, 'trade_number__19': 20, 'buy_time__19': datetime.time(0, 0), 'sell_price__19': 183.97, 'sell_date__19': datetime.date(2023, 4, 15), 'buy_date__20': datetime.date(2023, 4, 15), 'sell_time__20': datetime.time(0, 0), 'buy_price__20': 184.15397, 'test_id__20': 2, 'position_size__20': 35, 'trade_number__20': 21, 'buy_time__20': datetime.time(0, 0), 'sell_price__20': 193.9, 'sell_date__20': datetime.date(2023, 5, 18)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-06 18:44:34,118 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:44:35,135 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:44:35,135 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:44:35,291 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:44:35,319 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:44:35,319 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:44:35,319 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:44:43,636 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:44:43,643 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:44:43,643 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:44:43,852 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:44:43,859 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:44:43,859 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:44:44,078 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:44:44,078 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:44:44,078 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:44:44,080 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:44:44,157 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:44:44,158 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:44:44,159 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:44:44,159 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:44:44,161 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 18:44:44,942 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 18:44:44,959 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 18:44:44,961 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 18:44:44,962 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 18:44:45,065 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 18:44:46,159 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 18:44:46,159 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 18:44:46,159 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 18:44:46,159 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 18:44:46,159 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 18:44:46,209 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 18:44:46,259 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 18:44:46,272 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=3
2025-01-06 18:44:46,280 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 3
2025-01-06 18:44:46,281 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-06 18:44:46,359 - __main__ - ERROR - Error processing backtest: matplotlib is required for plotting when the default backend "matplotlib" is selected.
2025-01-06 18:53:31,516 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:53:32,451 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:53:32,462 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:53:32,609 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:53:32,642 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:53:32,643 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:53:32,643 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:53:44,245 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:53:44,255 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:53:44,256 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:53:44,403 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 18:53:44,403 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:53:44,403 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 18:53:44,699 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:53:44,700 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:53:44,700 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:53:44,700 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:53:44,817 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 18:53:44,817 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 18:53:44,817 - __main__ - INFO - Database operations initialized successfully
2025-01-06 18:53:44,817 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 18:53:44,817 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 18:53:45,641 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 18:53:45,658 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 18:53:45,661 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 18:53:45,663 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 18:53:45,783 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 18:53:47,153 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 18:53:47,153 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 18:53:47,155 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 18:53:47,156 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 18:53:47,157 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 18:53:47,210 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 18:53:47,249 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 18:53:47,262 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=4
2025-01-06 18:53:47,269 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 4
2025-01-06 18:53:47,270 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-06 18:53:47,327 - __main__ - ERROR - Error generating backtest plot: matplotlib is required for plotting when the default backend "matplotlib" is selected.
2025-01-06 19:00:49,986 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:00:52,818 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:00:52,819 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:00:53,078 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:00:53,230 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:00:53,230 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:00:53,232 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:01:03,075 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:01:03,081 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:01:03,083 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:01:03,238 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:01:03,238 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:01:03,238 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:01:03,472 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:01:03,472 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:01:03,472 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:01:03,472 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:01:03,570 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:01:03,579 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:01:03,579 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:01:03,579 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:01:03,588 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 19:01:04,531 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 19:01:04,548 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:01:04,549 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:01:04,549 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 19:01:04,721 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 19:01:07,493 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 19:01:07,493 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 19:01:07,509 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 19:01:07,514 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 19:01:07,520 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 19:01:07,568 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 19:01:07,611 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 19:01:07,621 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=5
2025-01-06 19:01:07,629 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 5
2025-01-06 19:01:07,630 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-06 19:01:07,684 - __main__ - ERROR - Error generating backtest plot: 'seaborn' is not a valid package style, path of style file, URL of style file, or library style name (library styles are listed in `style.available`)
2025-01-06 19:02:39,678 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:02:41,045 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:02:41,052 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:02:41,207 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:02:41,265 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:02:41,266 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:02:41,266 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:02:55,126 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:02:55,134 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:02:55,134 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:02:55,309 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:02:55,318 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:02:55,318 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:02:55,442 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:02:55,442 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:02:55,442 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:02:55,442 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:02:55,619 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:02:55,619 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:02:55,619 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:02:55,622 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:02:55,622 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del 2021 al 2024
2025-01-06 19:02:56,536 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 19:02:56,558 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2021-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 19:02:56,559 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2021-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-06 19:02:56,559 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2021-01-01 to 2024-12-31
2025-01-06 19:02:56,678 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 19:02:59,275 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 19:02:59,290 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 19:02:59,292 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 1005
2025-01-06 19:02:59,311 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 19:02:59,317 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 19:02:59,431 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 19:02:59,492 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 19:02:59,504 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=6
2025-01-06 19:02:59,511 - src.database.operations - ERROR - Error saving backtest details: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (9, 6, 1, 2021-02-01, 00:00:00, 2021-02-28, 00:00:00, 134.215650, 122.820000, -17, 27 days, -8.49, 193.73, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %(buy_price__0)s, %(sell_price__0)s, %(position_size__0)s), (%(test_id__1)s, %(trade_number__1)s, %(buy_date__1)s, %(buy_time__1)s, %(sell_date__1)s, %(sell_time__1)s, %(buy_price__1)s, %(sell_price__1)s, %(position_size__1)s)]
[parameters: {'sell_date__0': datetime.date(2021, 2, 28), 'buy_date__0': datetime.date(2021, 2, 1), 'sell_price__0': 122.82, 'position_size__0': -17, 'trade_number__0': 1, 'buy_time__0': datetime.time(0, 0), 'buy_price__0': 134.21564999999998, 'sell_time__0': datetime.time(0, 0), 'test_id__0': 6, 'sell_date__1': datetime.date(2023, 9, 21), 'buy_date__1': datetime.date(2021, 2, 1), 'sell_price__1': 247.77, 'position_size__1': -57, 'trade_number__1': 2, 'buy_time__1': datetime.time(0, 0), 'buy_price__1': 134.21564999999998, 'sell_time__1': datetime.time(0, 0), 'test_id__1': 6}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-06 19:02:59,525 - src.backtesting.two_sma - ERROR - Error during two_SMA_backtest: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (9, 6, 1, 2021-02-01, 00:00:00, 2021-02-28, 00:00:00, 134.215650, 122.820000, -17, 27 days, -8.49, 193.73, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %(buy_price__0)s, %(sell_price__0)s, %(position_size__0)s), (%(test_id__1)s, %(trade_number__1)s, %(buy_date__1)s, %(buy_time__1)s, %(sell_date__1)s, %(sell_time__1)s, %(buy_price__1)s, %(sell_price__1)s, %(position_size__1)s)]
[parameters: {'sell_date__0': datetime.date(2021, 2, 28), 'buy_date__0': datetime.date(2021, 2, 1), 'sell_price__0': 122.82, 'position_size__0': -17, 'trade_number__0': 1, 'buy_time__0': datetime.time(0, 0), 'buy_price__0': 134.21564999999998, 'sell_time__0': datetime.time(0, 0), 'test_id__0': 6, 'sell_date__1': datetime.date(2023, 9, 21), 'buy_date__1': datetime.date(2021, 2, 1), 'sell_price__1': 247.77, 'position_size__1': -57, 'trade_number__1': 2, 'buy_time__1': datetime.time(0, 0), 'buy_price__1': 134.21564999999998, 'sell_time__1': datetime.time(0, 0), 'test_id__1': 6}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-06 19:02:59,526 - __main__ - ERROR - Error processing backtest: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (9, 6, 1, 2021-02-01, 00:00:00, 2021-02-28, 00:00:00, 134.215650, 122.820000, -17, 27 days, -8.49, 193.73, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %(buy_price__0)s, %(sell_price__0)s, %(position_size__0)s), (%(test_id__1)s, %(trade_number__1)s, %(buy_date__1)s, %(buy_time__1)s, %(sell_date__1)s, %(sell_time__1)s, %(buy_price__1)s, %(sell_price__1)s, %(position_size__1)s)]
[parameters: {'sell_date__0': datetime.date(2021, 2, 28), 'buy_date__0': datetime.date(2021, 2, 1), 'sell_price__0': 122.82, 'position_size__0': -17, 'trade_number__0': 1, 'buy_time__0': datetime.time(0, 0), 'buy_price__0': 134.21564999999998, 'sell_time__0': datetime.time(0, 0), 'test_id__0': 6, 'sell_date__1': datetime.date(2023, 9, 21), 'buy_date__1': datetime.date(2021, 2, 1), 'sell_price__1': 247.77, 'position_size__1': -57, 'trade_number__1': 2, 'buy_time__1': datetime.time(0, 0), 'buy_price__1': 134.21564999999998, 'sell_time__1': datetime.time(0, 0), 'test_id__1': 6}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-06 19:03:29,121 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:03:29,129 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:03:29,130 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:03:29,259 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:03:29,261 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:03:29,261 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:03:29,473 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:03:29,473 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:03:29,473 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:03:29,473 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:03:29,630 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:03:29,630 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:03:29,630 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:03:29,630 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:03:29,639 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL del 2022 al 2023
2025-01-06 19:03:30,581 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 19:03:30,583 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:03:30,583 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:03:30,583 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 19:03:30,693 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 19:03:30,850 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 19:03:30,851 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 19:03:30,854 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 19:03:30,859 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 19:03:30,860 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 19:03:30,913 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 19:03:30,917 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 19:03:30,933 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=7
2025-01-06 19:03:30,943 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 7
2025-01-06 19:03:30,944 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-06 19:03:31,003 - __main__ - ERROR - Error generating backtest plot: 'seaborn' is not a valid package style, path of style file, URL of style file, or library style name (library styles are listed in `style.available`)
2025-01-06 19:13:22,183 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:13:23,153 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:13:23,153 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:13:23,299 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:13:23,333 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:13:23,333 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:13:23,333 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:13:31,463 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:13:31,471 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:13:31,473 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:13:31,701 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:13:31,709 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:13:31,711 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:13:31,849 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:13:31,849 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:13:31,849 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:13:31,849 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:13:32,065 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:13:32,065 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:13:32,065 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:13:32,065 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:13:32,065 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 19:13:32,814 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 19:13:32,828 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:13:32,829 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:13:32,830 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 19:13:32,907 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 19:13:34,093 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 19:13:34,094 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 19:13:34,095 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 19:13:34,096 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 19:13:34,097 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 19:13:34,122 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 19:13:34,144 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 19:13:34,149 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=8
2025-01-06 19:13:34,154 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 8
2025-01-06 19:13:34,155 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-06 19:13:34,285 - __main__ - ERROR - Error generating backtest plot: no numeric data to plot
2025-01-06 19:19:11,794 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:19:12,751 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:19:12,751 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:19:12,908 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:19:12,946 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:19:12,946 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:19:12,946 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:19:24,851 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:19:24,862 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:19:24,864 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:19:25,008 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:19:25,016 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:19:25,016 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:19:25,254 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:19:25,254 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:19:25,254 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:19:25,254 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:19:25,312 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:19:25,312 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:19:25,312 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:19:25,312 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:19:25,330 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de Apple Inc de 2022 y 2023
2025-01-06 19:19:26,484 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 19:19:26,524 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:19:26,526 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:19:26,527 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 19:19:26,635 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 19:19:28,137 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 19:19:28,137 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 19:19:28,151 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 19:19:28,160 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 19:19:28,164 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 19:19:28,254 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 19:19:28,286 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 19:19:28,299 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=9
2025-01-06 19:19:28,307 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 9
2025-01-06 19:19:28,307 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-06 19:26:40,325 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:26:41,341 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:26:41,341 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:26:41,492 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:26:41,527 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:26:41,527 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:26:41,527 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:26:54,681 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:26:54,690 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:26:54,692 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:26:54,875 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-06 19:26:54,882 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:26:54,882 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-06 19:26:55,117 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:26:55,117 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:26:55,117 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:26:55,117 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:26:55,215 - __main__ - INFO - QueryParser initialized successfully
2025-01-06 19:26:55,216 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-06 19:26:55,217 - __main__ - INFO - Database operations initialized successfully
2025-01-06 19:26:55,217 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-06 19:26:55,219 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-06 19:26:55,990 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-06 19:26:56,002 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:26:56,003 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-06 19:26:56,003 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-06 19:26:56,113 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-06 19:26:57,601 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-06 19:26:57,603 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-06 19:26:57,609 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-06 19:26:57,621 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-06 19:26:57,625 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-06 19:26:57,687 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-06 19:26:57,716 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-06 19:26:57,733 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=10
2025-01-06 19:26:57,742 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 10
2025-01-06 19:26:57,743 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-07 09:07:06,459 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:07:08,207 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:07:08,209 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:07:08,356 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:07:08,424 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:07:08,424 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:07:08,424 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:07:26,975 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:07:26,981 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:07:26,983 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:07:27,156 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:07:27,160 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:07:27,160 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:07:27,404 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:07:27,405 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:07:27,406 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:07:27,406 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:07:27,475 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:07:27,476 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:07:27,477 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:07:27,477 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:07:27,480 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-07 09:07:28,319 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-07 09:07:28,347 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:07:28,348 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:07:28,348 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-07 09:07:28,533 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-07 09:07:31,617 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-07 09:07:31,619 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-07 09:07:31,639 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-07 09:07:31,649 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-07 09:07:31,655 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-07 09:07:31,755 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-07 09:07:31,793 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-07 09:07:31,803 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=11
2025-01-07 09:07:31,818 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 11
2025-01-07 09:07:31,819 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-07 09:07:31,925 - __main__ - ERROR - Error processing backtest: no numeric data to plot
2025-01-07 09:18:44,985 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:18:51,994 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:18:51,996 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:18:52,393 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:18:52,676 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:18:52,677 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:18:52,677 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:19:06,434 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:19:06,442 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:19:06,444 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:19:06,630 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:19:06,634 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:19:06,635 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:19:06,848 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:19:06,849 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:19:06,850 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:19:06,850 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:19:06,930 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:19:06,935 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:19:06,935 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:19:06,936 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:19:06,948 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-07 09:19:07,930 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-07 09:19:07,947 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:19:07,948 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:19:07,949 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-07 09:19:08,122 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-07 09:19:14,016 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-07 09:19:14,017 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-07 09:19:14,019 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-07 09:19:14,022 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-07 09:19:14,024 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-07 09:19:14,106 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-07 09:19:14,134 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-07 09:19:14,138 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=12
2025-01-07 09:19:14,143 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 12
2025-01-07 09:19:14,143 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-07 09:19:14,316 - __main__ - ERROR - Error processing backtest: no numeric data to plot
2025-01-07 09:24:47,500 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:24:48,466 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:24:48,467 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:24:48,632 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:24:48,666 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:24:48,667 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:24:48,667 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:24:58,649 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:24:58,654 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:24:58,657 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:24:58,828 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:24:58,834 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:24:58,835 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:24:59,153 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:24:59,156 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:24:59,156 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:24:59,157 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:24:59,265 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:24:59,266 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:24:59,271 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:24:59,272 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:24:59,286 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-07 09:25:00,298 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-07 09:25:00,320 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:25:00,321 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:25:00,322 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-07 09:25:00,435 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-07 09:25:02,250 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-07 09:25:02,251 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-07 09:25:02,252 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-07 09:25:02,255 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-07 09:25:02,257 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-07 09:25:02,299 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-07 09:25:02,323 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-07 09:25:02,330 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=13
2025-01-07 09:25:02,335 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 13
2025-01-07 09:25:02,336 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-07 09:25:02,336 - __main__ - ERROR - Error processing backtest: too many values to unpack (expected 2)
2025-01-07 09:27:00,210 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:27:01,224 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:27:01,225 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:27:01,387 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:27:01,434 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:27:01,434 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:27:01,435 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:27:10,238 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:27:10,244 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:27:10,245 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:27:10,396 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:27:10,401 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:27:10,402 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:27:10,658 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:27:10,659 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:27:10,659 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:27:10,660 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:27:10,740 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:27:10,742 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:27:10,742 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:27:10,742 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:27:10,748 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-07 09:27:11,663 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-07 09:27:11,680 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:27:11,683 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:27:11,683 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-07 09:27:11,797 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-07 09:27:14,129 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-07 09:27:14,132 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-07 09:27:14,137 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-07 09:27:14,142 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-07 09:27:14,148 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-07 09:27:14,299 - src.backtesting.two_sma - ERROR - Error during two_SMA_backtest: failed to validate DatetimeTickFormatter(id='p1046', ...).days: expected a value of type str, got ['%d %b', '%a %d'] of type list
2025-01-07 09:27:14,300 - __main__ - ERROR - Error processing backtest: failed to validate DatetimeTickFormatter(id='p1046', ...).days: expected a value of type str, got ['%d %b', '%a %d'] of type list
2025-01-07 09:29:26,491 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:29:27,661 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:29:27,662 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:29:27,827 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:29:27,866 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:29:27,867 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:29:27,867 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:29:36,067 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:29:36,074 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:29:36,076 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:29:36,199 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 09:29:36,204 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:29:36,205 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 09:29:36,452 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:29:36,454 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:29:36,454 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:29:36,455 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:29:36,575 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 09:29:36,576 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 09:29:36,576 - __main__ - INFO - Database operations initialized successfully
2025-01-07 09:29:36,577 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 09:29:36,581 - src.agents.query_parser - INFO - Parsing query: Mostrar datos diarios de AAPL de 2022 y 2023
2025-01-07 09:29:37,324 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-07 09:29:37,342 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:29:37,344 - __main__ - INFO - Parsed query: {'ticker': 'AAPL', 'start_date': '2022-01-01', 'end_date': '2023-12-31', 'timeframe': 'daily'}
2025-01-07 09:29:37,345 - src.agents.data_fetcher - INFO - Fetching data for ticker: AAPL, timeframe: daily, dates: 2022-01-01 to 2023-12-31
2025-01-07 09:29:37,474 - src.agents.data_fetcher - INFO - Data retrieved from database
2025-01-07 09:29:40,414 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-07 09:29:40,415 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-07 09:29:40,418 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 501
2025-01-07 09:29:40,424 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-07 09:29:40,428 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-07 09:29:40,535 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-07 09:29:40,638 - src.database.operations - INFO - Saved backtest summary for ticker: AAPL
2025-01-07 09:29:40,654 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=14
2025-01-07 09:29:40,664 - src.database.operations - INFO - Saved 1 backtest detail records for test_id 14
2025-01-07 09:29:40,665 - src.backtesting.two_sma - INFO - Backtest details saved for 1 trades
2025-01-07 10:18:19,456 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 10:18:20,878 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:18:20,878 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:18:21,024 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 10:18:21,072 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 10:18:21,073 - __main__ - INFO - Database operations initialized successfully
2025-01-07 10:18:21,073 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 10:18:48,800 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 10:18:48,810 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:18:48,813 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:18:48,924 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 10:18:48,931 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:18:48,932 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:18:49,321 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 10:18:49,322 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 10:18:49,322 - __main__ - INFO - Database operations initialized successfully
2025-01-07 10:18:49,323 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 10:18:49,401 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 10:18:49,405 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 10:18:49,405 - __main__ - INFO - Database operations initialized successfully
2025-01-07 10:18:49,406 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 10:18:49,419 - src.agents.query_parser - INFO - Parsing query: Analizar SPY de 2020  a 2024 con barras diarias
2025-01-07 10:18:50,222 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-01-07 10:18:50,236 - src.agents.query_parser - INFO - Successfully parsed query: {'ticker': 'SPY', 'start_date': '2020-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-07 10:18:50,237 - __main__ - INFO - Parsed query: {'ticker': 'SPY', 'start_date': '2020-01-01', 'end_date': '2024-12-31', 'timeframe': 'daily'}
2025-01-07 10:18:50,238 - src.agents.data_fetcher - INFO - Fetching data for ticker: SPY, timeframe: daily, dates: 2020-01-01 to 2024-12-31
2025-01-07 10:18:50,344 - src.agents.data_fetcher - INFO - Data not found in database. Fetching from API
2025-01-07 10:18:51,589 - src.api.alpha_vantage - INFO - Fetched 6335 records from Alpha Vantage for ticker: SPY
2025-01-07 10:18:51,591 - src.agents.data_fetcher - INFO - Data fetched from API successfully
2025-01-07 10:18:51,649 - src.database.operations - INFO - Added new fundamental data for ticker: SPY
2025-01-07 10:18:52,960 - src.database.operations - INFO - Saved 6335 new OHLC records for ticker: SPY
2025-01-07 10:18:52,977 - src.agents.data_fetcher - INFO - Fetched data saved to database
2025-01-07 10:18:53,014 - src.agents.data_fetcher - INFO - Data extracted from database after API fetch
2025-01-07 10:18:55,964 - __main__ - INFO - Executing the Two-SMA backtest
2025-01-07 10:18:55,965 - src.backtesting.two_sma - INFO - Starting two SMA backtest
2025-01-07 10:18:55,968 - src.backtesting.two_sma - INFO - Data prepared for backtesting. Rows: 1258
2025-01-07 10:18:55,971 - src.backtesting.two_sma - INFO - Initializing TwoSMA strategy with slow=20, fast=10
2025-01-07 10:18:55,972 - src.backtesting.two_sma - INFO - Successfully initialized moving averages
2025-01-07 10:18:56,068 - src.backtesting.two_sma - INFO - Backtest completed. Available stats: Index(['Start', 'End', 'Duration', 'Exposure Time [%]', 'Equity Final [$]',
       'Equity Peak [$]', 'Return [%]', 'Buy & Hold Return [%]',
       'Return (Ann.) [%]', 'Volatility (Ann.) [%]', 'Sharpe Ratio',
       'Sortino Ratio', 'Calmar Ratio', 'Max. Drawdown [%]',
       'Avg. Drawdown [%]', 'Max. Drawdown Duration', 'Avg. Drawdown Duration',
       '# Trades', 'Win Rate [%]', 'Best Trade [%]', 'Worst Trade [%]',
       'Avg. Trade [%]', 'Max. Trade Duration', 'Avg. Trade Duration',
       'Profit Factor', 'Expectancy [%]', 'SQN', '_strategy', '_equity_curve',
       '_trades'],
      dtype='object')
2025-01-07 10:18:56,082 - src.database.operations - INFO - Saved backtest summary for ticker: SPY
2025-01-07 10:18:56,091 - src.backtesting.two_sma - INFO - Backtest summary saved with test_id=15
2025-01-07 10:18:56,114 - src.database.operations - ERROR - Error saving backtest details: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (18, 15, 1, 2020-01-25, 00:00:00, 2020-03-08, 00:00:00, 331.937730, 274.210000, -8, 43 days, -17.39, 461.82, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %( ... 460 characters truncated ... _3)s, %(sell_date__3)s, %(sell_time__3)s, %(buy_price__3)s, %(sell_price__3)s, %(position_size__3)s)]
[parameters: {'buy_date__0': datetime.date(2020, 1, 25), 'buy_price__0': 331.93773, 'sell_date__0': datetime.date(2020, 3, 8), 'position_size__0': -8, 'sell_price__0': 274.21, 'test_id__0': 15, 'buy_time__0': datetime.time(0, 0), 'trade_number__0': 1, 'sell_time__0': datetime.time(0, 0), 'buy_date__1': datetime.date(2020, 5, 1), 'buy_price__1': 309.53015999999997, 'sell_date__1': datetime.date(2023, 6, 12), 'position_size__1': -6, 'sell_price__1': 589.905, 'test_id__1': 15, 'buy_time__1': datetime.time(0, 0), 'trade_number__1': 2, 'sell_time__1': datetime.time(0, 0), 'buy_date__2': datetime.date(2020, 2, 10), 'buy_price__2': 288.4113, 'sell_date__2': datetime.date(2023, 6, 12), 'position_size__2': -7, 'sell_price__2': 589.905, 'test_id__2': 15, 'buy_time__2': datetime.time(0, 0), 'trade_number__2': 3, 'sell_time__2': datetime.time(0, 0), 'buy_date__3': datetime.date(2020, 1, 25), 'buy_price__3': 331.93773, 'sell_date__3': datetime.date(2023, 6, 12), 'position_size__3': -22, 'sell_price__3': 589.905, 'test_id__3': 15, 'buy_time__3': datetime.time(0, 0), 'trade_number__3': 4, 'sell_time__3': datetime.time(0, 0)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-07 10:18:56,116 - src.backtesting.two_sma - ERROR - Error during two_SMA_backtest: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (18, 15, 1, 2020-01-25, 00:00:00, 2020-03-08, 00:00:00, 331.937730, 274.210000, -8, 43 days, -17.39, 461.82, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %( ... 460 characters truncated ... _3)s, %(sell_date__3)s, %(sell_time__3)s, %(buy_price__3)s, %(sell_price__3)s, %(position_size__3)s)]
[parameters: {'buy_date__0': datetime.date(2020, 1, 25), 'buy_price__0': 331.93773, 'sell_date__0': datetime.date(2020, 3, 8), 'position_size__0': -8, 'sell_price__0': 274.21, 'test_id__0': 15, 'buy_time__0': datetime.time(0, 0), 'trade_number__0': 1, 'sell_time__0': datetime.time(0, 0), 'buy_date__1': datetime.date(2020, 5, 1), 'buy_price__1': 309.53015999999997, 'sell_date__1': datetime.date(2023, 6, 12), 'position_size__1': -6, 'sell_price__1': 589.905, 'test_id__1': 15, 'buy_time__1': datetime.time(0, 0), 'trade_number__1': 2, 'sell_time__1': datetime.time(0, 0), 'buy_date__2': datetime.date(2020, 2, 10), 'buy_price__2': 288.4113, 'sell_date__2': datetime.date(2023, 6, 12), 'position_size__2': -7, 'sell_price__2': 589.905, 'test_id__2': 15, 'buy_time__2': datetime.time(0, 0), 'trade_number__2': 3, 'sell_time__2': datetime.time(0, 0), 'buy_date__3': datetime.date(2020, 1, 25), 'buy_price__3': 331.93773, 'sell_date__3': datetime.date(2023, 6, 12), 'position_size__3': -22, 'sell_price__3': 589.905, 'test_id__3': 15, 'buy_time__3': datetime.time(0, 0), 'trade_number__3': 4, 'sell_time__3': datetime.time(0, 0)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-07 10:18:56,117 - __main__ - ERROR - Error processing backtest: (psycopg2.errors.CheckViolation) el nuevo registro para la relación «backtest_details» viola la restricción «check» «backtest_details_position_size_check»
DETAIL:  La fila que falla contiene (18, 15, 1, 2020-01-25, 00:00:00, 2020-03-08, 00:00:00, 331.937730, 274.210000, -8, 43 days, -17.39, 461.82, null).

[SQL: INSERT INTO backtest_details (test_id, trade_number, buy_date, buy_time, sell_date, sell_time, buy_price, sell_price, position_size) VALUES (%(test_id__0)s, %(trade_number__0)s, %(buy_date__0)s, %(buy_time__0)s, %(sell_date__0)s, %(sell_time__0)s, %( ... 460 characters truncated ... _3)s, %(sell_date__3)s, %(sell_time__3)s, %(buy_price__3)s, %(sell_price__3)s, %(position_size__3)s)]
[parameters: {'buy_date__0': datetime.date(2020, 1, 25), 'buy_price__0': 331.93773, 'sell_date__0': datetime.date(2020, 3, 8), 'position_size__0': -8, 'sell_price__0': 274.21, 'test_id__0': 15, 'buy_time__0': datetime.time(0, 0), 'trade_number__0': 1, 'sell_time__0': datetime.time(0, 0), 'buy_date__1': datetime.date(2020, 5, 1), 'buy_price__1': 309.53015999999997, 'sell_date__1': datetime.date(2023, 6, 12), 'position_size__1': -6, 'sell_price__1': 589.905, 'test_id__1': 15, 'buy_time__1': datetime.time(0, 0), 'trade_number__1': 2, 'sell_time__1': datetime.time(0, 0), 'buy_date__2': datetime.date(2020, 2, 10), 'buy_price__2': 288.4113, 'sell_date__2': datetime.date(2023, 6, 12), 'position_size__2': -7, 'sell_price__2': 589.905, 'test_id__2': 15, 'buy_time__2': datetime.time(0, 0), 'trade_number__2': 3, 'sell_time__2': datetime.time(0, 0), 'buy_date__3': datetime.date(2020, 1, 25), 'buy_price__3': 331.93773, 'sell_date__3': datetime.date(2023, 6, 12), 'position_size__3': -22, 'sell_price__3': 589.905, 'test_id__3': 15, 'buy_time__3': datetime.time(0, 0), 'trade_number__3': 4, 'sell_time__3': datetime.time(0, 0)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-01-07 10:24:29,122 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 10:24:30,028 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:24:30,028 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:24:30,174 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 10:24:30,207 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 10:24:30,207 - __main__ - INFO - Database operations initialized successfully
2025-01-07 10:24:30,207 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 10:24:54,799 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 10:24:54,815 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:24:54,818 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:24:54,985 - __main__ - INFO - Added C:\Users\jvazq\Data_Analysis_Tools\projects\yenka_ia1 to Python path
2025-01-07 10:24:54,992 - __main__ - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:24:54,993 - src.agents.query_parser - INFO - Initializing QueryParser with OpenAI API
2025-01-07 10:24:55,235 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 10:24:55,236 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 10:24:55,237 - __main__ - INFO - Database operations initialized successfully
2025-01-07 10:24:55,237 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 10:24:55,305 - __main__ - INFO - QueryParser initialized successfully
2025-01-07 10:24:55,307 - src.database.operations - INFO - PostgreSQL database connection initialized
2025-01-07 10:24:55,308 - __main__ - INFO - Database operations initialized successfully
2025-01-07 10:24:55,308 - src.agents.data_fetcher - INFO - Initializing DataFetcher
2025-01-07 10:24:55,310 - src.agents.query_parser - INFO - Parsing query: Analiza SPY de 2020 a 2024
